{"ast":null,"code":"import { __assign, __extends } from \"tslib\";\nimport { get } from '@antv/util';\nimport GroupComponent from '../abstract/group-component';\nimport Theme from '../util/theme';\nimport { pointsToBBox } from '../util/util';\nimport { renderTag } from '../util/graphic';\n\nvar DataRegionAnnotation =\n/** @class */\nfunction (_super) {\n  __extends(DataRegionAnnotation, _super);\n\n  function DataRegionAnnotation() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  /**\n   * 默认的配置项\n   * @returns {object} 默认的配置项\n   */\n\n\n  DataRegionAnnotation.prototype.getDefaultCfg = function () {\n    var cfg = _super.prototype.getDefaultCfg.call(this);\n\n    return __assign(__assign({}, cfg), {\n      name: 'annotation',\n      type: 'dataRegion',\n      locationType: 'points',\n      points: [],\n      lineLength: 0,\n      region: {},\n      text: {},\n      defaultCfg: {\n        region: {\n          style: {\n            lineWidth: 0,\n            fill: Theme.regionColor,\n            opacity: 0.4\n          }\n        },\n        text: {\n          content: '',\n          style: {\n            textAlign: 'center',\n            textBaseline: 'bottom',\n            fontSize: 12,\n            fill: Theme.textColor,\n            fontFamily: Theme.fontFamily\n          }\n        }\n      }\n    });\n  };\n\n  DataRegionAnnotation.prototype.renderInner = function (group) {\n    var regionStyle = get(this.get('region'), 'style', {});\n    var textStyle = get(this.get('text'), 'style', {});\n    var lineLength = this.get('lineLength') || 0;\n    var points = this.get('points');\n\n    if (!points.length) {\n      return;\n    }\n\n    var bbox = pointsToBBox(points); // render region\n\n    var path = [];\n    path.push(['M', points[0].x, bbox.minY - lineLength]);\n    points.forEach(function (point) {\n      path.push(['L', point.x, point.y]);\n    });\n    path.push(['L', points[points.length - 1].x, points[points.length - 1].y - lineLength]);\n    this.addShape(group, {\n      type: 'path',\n      id: this.getElementId('region'),\n      name: 'annotation-region',\n      attrs: __assign({\n        path: path\n      }, regionStyle)\n    }); // render text\n\n    var textCfg = __assign({\n      id: this.getElementId('text'),\n      name: 'annotation-text',\n      x: (bbox.minX + bbox.maxX) / 2,\n      y: bbox.minY - lineLength\n    }, this.get('text'));\n\n    renderTag(group, textCfg);\n  };\n\n  return DataRegionAnnotation;\n}(GroupComponent);\n\nexport default DataRegionAnnotation;","map":{"version":3,"mappings":"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","names":["get","GroupComponent","Theme","pointsToBBox","renderTag","__extends","DataRegionAnnotation","cfg","_super","getDefaultCfg","call","name","type","locationType","points","lineLength","region","text","defaultCfg","style","lineWidth","fill","regionColor","opacity","content","textAlign","textBaseline","fontSize","textColor","fontFamily","group","regionStyle","textStyle","length","bbox","path","push","x","minY","forEach","point","y","addShape","id","getElementId","attrs","textCfg","minX","maxX"],"sourceRoot":"","sources":["../../src/annotation/data-region.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}