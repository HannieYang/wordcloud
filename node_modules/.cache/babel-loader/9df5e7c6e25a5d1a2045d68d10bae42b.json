{"ast":null,"code":"import { __assign } from \"tslib\";\nimport { getArcPath } from '../../../util/graphics';\nimport { registerShape } from '../base';\nimport { getStyle } from '../util/get-style';\nimport { getCPath, getQPath } from './util';\n\nfunction getArcShapePath(from, to, center) {\n  var sub = getQPath(to, center);\n  var path = [['M', from.x, from.y]];\n  path.push(sub);\n  return path;\n}\n\nfunction getArcShapeWeightPath(points, center) {\n  var arc1 = getQPath(points[1], center);\n  var arc2 = getQPath(points[3], center);\n  var path = [['M', points[0].x, points[0].y]];\n  path.push(arc2);\n  path.push(['L', points[3].x, points[3].y]);\n  path.push(['L', points[2].x, points[2].y]);\n  path.push(arc1);\n  path.push(['L', points[1].x, points[1].y]);\n  path.push(['L', points[0].x, points[0].y]);\n  path.push(['Z']);\n  return path;\n} // 弧线包括笛卡尔坐标系下的半圆弧线、极坐标系下以圆心为控制点的二阶曲线、笛卡尔坐标系下带权重的三阶曲线、极坐标系下带权重的以圆心为控制点的二阶曲线\n\n\nregisterShape('edge', 'arc', {\n  draw: function (cfg, container) {\n    var style = getStyle(cfg, true, false, 'lineWidth');\n    var points = cfg.points;\n    var type = points.length > 2 ? 'weight' : 'normal';\n    var path;\n\n    if (cfg.isInCircle) {\n      var center = {\n        x: 0,\n        y: 1\n      };\n\n      if (type === 'normal') {\n        path = getArcShapePath(points[0], points[1], center);\n      } else {\n        style.fill = style.stroke;\n        path = getArcShapeWeightPath(points, center);\n      }\n\n      path = this.parsePath(path);\n      return container.addShape('path', {\n        attrs: __assign(__assign({}, style), {\n          path: path\n        })\n      });\n    } else {\n      if (type === 'normal') {\n        points = this.parsePoints(points);\n        path = getArcPath((points[1].x + points[0].x) / 2, points[0].y, Math.abs(points[1].x - points[0].x) / 2, Math.PI, Math.PI * 2);\n        return container.addShape('path', {\n          attrs: __assign(__assign({}, style), {\n            path: path\n          })\n        });\n      } else {\n        var c1 = getCPath(points[1], points[3]);\n        var c2 = getCPath(points[2], points[0]);\n        path = [['M', points[0].x, points[0].y], ['L', points[1].x, points[1].y], c1, ['L', points[3].x, points[3].y], ['L', points[2].x, points[2].y], c2, ['Z']];\n        path = this.parsePath(path);\n        style.fill = style.stroke;\n        return container.addShape('path', {\n          attrs: __assign(__assign({}, style), {\n            path: path\n          })\n        });\n      }\n    }\n  },\n  getMarker: function (markerCfg) {\n    return {\n      symbol: 'circle',\n      style: {\n        r: 4.5,\n        fill: markerCfg.color\n      }\n    };\n  }\n});","map":{"version":3,"mappings":";AAGA,SAASA,UAAT,QAA2B,wBAA3B;AACA,SAASC,aAAT,QAA8B,SAA9B;AACA,SAASC,QAAT,QAAyB,mBAAzB;AACA,SAASC,QAAT,EAAmBC,QAAnB,QAAmC,QAAnC;;AAEA,SAASC,eAAT,CAAyBC,IAAzB,EAAsCC,EAAtC,EAAiDC,MAAjD,EAA8D;EAC5D,IAAMC,GAAG,GAAGL,QAAQ,CAACG,EAAD,EAAKC,MAAL,CAApB;EACA,IAAME,IAAI,GAAG,CAAC,CAAC,GAAD,EAAMJ,IAAI,CAACK,CAAX,EAAcL,IAAI,CAACM,CAAnB,CAAD,CAAb;EACAF,IAAI,CAACG,IAAL,CAAUJ,GAAV;EACA,OAAOC,IAAP;AACD;;AAED,SAASI,qBAAT,CAA+BC,MAA/B,EAAgDP,MAAhD,EAA6D;EAC3D,IAAMQ,IAAI,GAAGZ,QAAQ,CAACW,MAAM,CAAC,CAAD,CAAP,EAAYP,MAAZ,CAArB;EACA,IAAMS,IAAI,GAAGb,QAAQ,CAACW,MAAM,CAAC,CAAD,CAAP,EAAYP,MAAZ,CAArB;EACA,IAAME,IAAI,GAAG,CAAC,CAAC,GAAD,EAAMK,MAAM,CAAC,CAAD,CAAN,CAAUJ,CAAhB,EAAmBI,MAAM,CAAC,CAAD,CAAN,CAAUH,CAA7B,CAAD,CAAb;EACAF,IAAI,CAACG,IAAL,CAAUI,IAAV;EACAP,IAAI,CAACG,IAAL,CAAU,CAAC,GAAD,EAAME,MAAM,CAAC,CAAD,CAAN,CAAUJ,CAAhB,EAAmBI,MAAM,CAAC,CAAD,CAAN,CAAUH,CAA7B,CAAV;EACAF,IAAI,CAACG,IAAL,CAAU,CAAC,GAAD,EAAME,MAAM,CAAC,CAAD,CAAN,CAAUJ,CAAhB,EAAmBI,MAAM,CAAC,CAAD,CAAN,CAAUH,CAA7B,CAAV;EACAF,IAAI,CAACG,IAAL,CAAUG,IAAV;EACAN,IAAI,CAACG,IAAL,CAAU,CAAC,GAAD,EAAME,MAAM,CAAC,CAAD,CAAN,CAAUJ,CAAhB,EAAmBI,MAAM,CAAC,CAAD,CAAN,CAAUH,CAA7B,CAAV;EACAF,IAAI,CAACG,IAAL,CAAU,CAAC,GAAD,EAAME,MAAM,CAAC,CAAD,CAAN,CAAUJ,CAAhB,EAAmBI,MAAM,CAAC,CAAD,CAAN,CAAUH,CAA7B,CAAV;EACAF,IAAI,CAACG,IAAL,CAAU,CAAC,GAAD,CAAV;EACA,OAAOH,IAAP;AACD,C,CAED;;;AACAT,aAAa,CAAC,MAAD,EAAS,KAAT,EAAgB;EAC3BiB,IAAI,EAAJ,UAAKC,GAAL,EAAqBC,SAArB,EAAsC;IACpC,IAAMC,KAAK,GAAGnB,QAAQ,CAACiB,GAAD,EAAM,IAAN,EAAY,KAAZ,EAAmB,WAAnB,CAAtB;IAEA,IAAIJ,MAAM,GAAGI,GAAG,CAACJ,MAAjB;IACA,IAAMO,IAAI,GAAGP,MAAM,CAACQ,MAAP,GAAgB,CAAhB,GAAoB,QAApB,GAA+B,QAA5C;IACA,IAAIb,IAAJ;;IACA,IAAIS,GAAG,CAACK,UAAR,EAAoB;MAClB,IAAMhB,MAAM,GAAG;QAAEG,CAAC,EAAE,CAAL;QAAQC,CAAC,EAAE;MAAX,CAAf;;MACA,IAAIU,IAAI,KAAK,QAAb,EAAuB;QACrBZ,IAAI,GAAGL,eAAe,CAACU,MAAM,CAAC,CAAD,CAAP,EAAYA,MAAM,CAAC,CAAD,CAAlB,EAAuBP,MAAvB,CAAtB;MACD,CAFD,MAEO;QACLa,KAAK,CAACI,IAAN,GAAaJ,KAAK,CAACK,MAAnB;QACAhB,IAAI,GAAGI,qBAAqB,CAACC,MAAD,EAASP,MAAT,CAA5B;MACD;;MACDE,IAAI,GAAG,KAAKiB,SAAL,CAAejB,IAAf,CAAP;MAEA,OAAOU,SAAS,CAACQ,QAAV,CAAmB,MAAnB,EAA2B;QAChCC,KAAK,wBACAR,KADA,GACK;UACRX,IAAI;QADI,CADL;MAD2B,CAA3B,CAAP;IAMD,CAhBD,MAgBO;MACL,IAAIY,IAAI,KAAK,QAAb,EAAuB;QACrBP,MAAM,GAAG,KAAKe,WAAL,CAAiBf,MAAjB,CAAT;QACAL,IAAI,GAAGV,UAAU,CACf,CAACe,MAAM,CAAC,CAAD,CAAN,CAAUJ,CAAV,GAAcI,MAAM,CAAC,CAAD,CAAN,CAAUJ,CAAzB,IAA8B,CADf,EAEfI,MAAM,CAAC,CAAD,CAAN,CAAUH,CAFK,EAGfmB,IAAI,CAACC,GAAL,CAASjB,MAAM,CAAC,CAAD,CAAN,CAAUJ,CAAV,GAAcI,MAAM,CAAC,CAAD,CAAN,CAAUJ,CAAjC,IAAsC,CAHvB,EAIfoB,IAAI,CAACE,EAJU,EAKfF,IAAI,CAACE,EAAL,GAAU,CALK,CAAjB;QAOA,OAAOb,SAAS,CAACQ,QAAV,CAAmB,MAAnB,EAA2B;UAChCC,KAAK,wBACAR,KADA,GACK;YACRX,IAAI;UADI,CADL;QAD2B,CAA3B,CAAP;MAMD,CAfD,MAeO;QACL,IAAMwB,EAAE,GAAG/B,QAAQ,CAACY,MAAM,CAAC,CAAD,CAAP,EAAYA,MAAM,CAAC,CAAD,CAAlB,CAAnB;QACA,IAAMoB,EAAE,GAAGhC,QAAQ,CAACY,MAAM,CAAC,CAAD,CAAP,EAAYA,MAAM,CAAC,CAAD,CAAlB,CAAnB;QAEAL,IAAI,GAAG,CACL,CAAC,GAAD,EAAMK,MAAM,CAAC,CAAD,CAAN,CAAUJ,CAAhB,EAAmBI,MAAM,CAAC,CAAD,CAAN,CAAUH,CAA7B,CADK,EAEL,CAAC,GAAD,EAAMG,MAAM,CAAC,CAAD,CAAN,CAAUJ,CAAhB,EAAmBI,MAAM,CAAC,CAAD,CAAN,CAAUH,CAA7B,CAFK,EAGLsB,EAHK,EAIL,CAAC,GAAD,EAAMnB,MAAM,CAAC,CAAD,CAAN,CAAUJ,CAAhB,EAAmBI,MAAM,CAAC,CAAD,CAAN,CAAUH,CAA7B,CAJK,EAKL,CAAC,GAAD,EAAMG,MAAM,CAAC,CAAD,CAAN,CAAUJ,CAAhB,EAAmBI,MAAM,CAAC,CAAD,CAAN,CAAUH,CAA7B,CALK,EAMLuB,EANK,EAOL,CAAC,GAAD,CAPK,CAAP;QASAzB,IAAI,GAAG,KAAKiB,SAAL,CAAejB,IAAf,CAAP;QACAW,KAAK,CAACI,IAAN,GAAaJ,KAAK,CAACK,MAAnB;QAEA,OAAON,SAAS,CAACQ,QAAV,CAAmB,MAAnB,EAA2B;UAChCC,KAAK,wBACAR,KADA,GACK;YACRX,IAAI;UADI,CADL;QAD2B,CAA3B,CAAP;MAMD;IACF;EACF,CA/D0B;EAgE3B0B,SAAS,EAAT,UAAUC,SAAV,EAAmC;IACjC,OAAO;MACLC,MAAM,EAAE,QADH;MAELjB,KAAK,EAAE;QACLkB,CAAC,EAAE,GADE;QAELd,IAAI,EAAEY,SAAS,CAACG;MAFX;IAFF,CAAP;EAOD;AAxE0B,CAAhB,CAAb","names":["getArcPath","registerShape","getStyle","getCPath","getQPath","getArcShapePath","from","to","center","sub","path","x","y","push","getArcShapeWeightPath","points","arc1","arc2","draw","cfg","container","style","type","length","isInCircle","fill","stroke","parsePath","addShape","attrs","parsePoints","Math","abs","PI","c1","c2","getMarker","markerCfg","symbol","r","color"],"sourceRoot":"","sources":["../../../../src/geometry/shape/edge/arc.ts"],"sourcesContent":["import { IGroup } from '../../../dependents';\nimport { Point, ShapeInfo, ShapeMarkerCfg } from '../../../interface';\n\nimport { getArcPath } from '../../../util/graphics';\nimport { registerShape } from '../base';\nimport { getStyle } from '../util/get-style';\nimport { getCPath, getQPath } from './util';\n\nfunction getArcShapePath(from: Point, to: Point, center: Point) {\n  const sub = getQPath(to, center);\n  const path = [['M', from.x, from.y]];\n  path.push(sub);\n  return path;\n}\n\nfunction getArcShapeWeightPath(points: Point[], center: Point) {\n  const arc1 = getQPath(points[1], center);\n  const arc2 = getQPath(points[3], center);\n  const path = [['M', points[0].x, points[0].y]];\n  path.push(arc2);\n  path.push(['L', points[3].x, points[3].y]);\n  path.push(['L', points[2].x, points[2].y]);\n  path.push(arc1);\n  path.push(['L', points[1].x, points[1].y]);\n  path.push(['L', points[0].x, points[0].y]);\n  path.push(['Z']);\n  return path;\n}\n\n// 弧线包括笛卡尔坐标系下的半圆弧线、极坐标系下以圆心为控制点的二阶曲线、笛卡尔坐标系下带权重的三阶曲线、极坐标系下带权重的以圆心为控制点的二阶曲线\nregisterShape('edge', 'arc', {\n  draw(cfg: ShapeInfo, container: IGroup) {\n    const style = getStyle(cfg, true, false, 'lineWidth');\n\n    let points = cfg.points as Point[];\n    const type = points.length > 2 ? 'weight' : 'normal';\n    let path;\n    if (cfg.isInCircle) {\n      const center = { x: 0, y: 1 };\n      if (type === 'normal') {\n        path = getArcShapePath(points[0], points[1], center);\n      } else {\n        style.fill = style.stroke;\n        path = getArcShapeWeightPath(points, center);\n      }\n      path = this.parsePath(path);\n\n      return container.addShape('path', {\n        attrs: {\n          ...style,\n          path,\n        },\n      });\n    } else {\n      if (type === 'normal') {\n        points = this.parsePoints(points);\n        path = getArcPath(\n          (points[1].x + points[0].x) / 2,\n          points[0].y,\n          Math.abs(points[1].x - points[0].x) / 2,\n          Math.PI,\n          Math.PI * 2\n        );\n        return container.addShape('path', {\n          attrs: {\n            ...style,\n            path,\n          },\n        });\n      } else {\n        const c1 = getCPath(points[1], points[3]);\n        const c2 = getCPath(points[2], points[0]);\n\n        path = [\n          ['M', points[0].x, points[0].y],\n          ['L', points[1].x, points[1].y],\n          c1,\n          ['L', points[3].x, points[3].y],\n          ['L', points[2].x, points[2].y],\n          c2,\n          ['Z'],\n        ];\n        path = this.parsePath(path);\n        style.fill = style.stroke;\n\n        return container.addShape('path', {\n          attrs: {\n            ...style,\n            path,\n          },\n        });\n      }\n    }\n  },\n  getMarker(markerCfg: ShapeMarkerCfg) {\n    return {\n      symbol: 'circle',\n      style: {\n        r: 4.5,\n        fill: markerCfg.color,\n      },\n    };\n  },\n});\n"]},"metadata":{},"sourceType":"module"}