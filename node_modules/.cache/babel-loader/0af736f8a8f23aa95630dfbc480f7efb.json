{"ast":null,"code":"import { __assign } from \"tslib\";\nimport { registerShape } from '@antv/g2';\nregisterShape('polygon', 'square', {\n  draw: function (cfg, group) {\n    var _a, _b;\n\n    var cx = cfg.x;\n    var cy = cfg.y;\n    var points = this.parsePoints(cfg.points);\n    var width = Math.abs(points[2].x - points[1].x);\n    var height = Math.abs(points[1].y - points[0].y);\n    var maxSideLength = Math.min(width, height);\n    var value = Number(cfg.shape[1]);\n    var sizeRatio = Number(cfg.shape[2]);\n    var lenRatio = Math.sqrt(sizeRatio);\n    var sideLength = maxSideLength * lenRatio * Math.sqrt(value);\n    var fill = ((_a = cfg.style) === null || _a === void 0 ? void 0 : _a.fill) || cfg.color || ((_b = cfg.defaultStyle) === null || _b === void 0 ? void 0 : _b.fill);\n    var polygon = group.addShape('rect', {\n      attrs: __assign(__assign(__assign({\n        x: cx - sideLength / 2,\n        y: cy - sideLength / 2,\n        width: sideLength,\n        height: sideLength\n      }, cfg.defaultStyle), cfg.style), {\n        fill: fill\n      })\n    });\n    return polygon;\n  }\n});","map":{"version":3,"mappings":";AAAA,SAASA,aAAT,QAA6C,UAA7C;AAEAA,aAAa,CAAC,SAAD,EAAY,QAAZ,EAAsB;EACjCC,IAAI,EAAJ,UAAKC,GAAL,EAA2BC,KAA3B,EAAwC;;;IACtC,IAAMC,EAAE,GAAGF,GAAG,CAACG,CAAf;IACA,IAAMC,EAAE,GAAGJ,GAAG,CAACK,CAAf;IAEA,IAAMC,MAAM,GAAG,KAAKC,WAAL,CAAiBP,GAAG,CAACM,MAArB,CAAf;IACA,IAAME,KAAK,GAAGC,IAAI,CAACC,GAAL,CAASJ,MAAM,CAAC,CAAD,CAAN,CAAUH,CAAV,GAAcG,MAAM,CAAC,CAAD,CAAN,CAAUH,CAAjC,CAAd;IACA,IAAMQ,MAAM,GAAGF,IAAI,CAACC,GAAL,CAASJ,MAAM,CAAC,CAAD,CAAN,CAAUD,CAAV,GAAcC,MAAM,CAAC,CAAD,CAAN,CAAUD,CAAjC,CAAf;IACA,IAAMO,aAAa,GAAGH,IAAI,CAACI,GAAL,CAASL,KAAT,EAAgBG,MAAhB,CAAtB;IAEA,IAAMG,KAAK,GAAGC,MAAM,CAACf,GAAG,CAACgB,KAAJ,CAAU,CAAV,CAAD,CAApB;IACA,IAAMC,SAAS,GAAGF,MAAM,CAACf,GAAG,CAACgB,KAAJ,CAAU,CAAV,CAAD,CAAxB;IACA,IAAME,QAAQ,GAAGT,IAAI,CAACU,IAAL,CAAUF,SAAV,CAAjB;IACA,IAAMG,UAAU,GAAGR,aAAa,GAAGM,QAAhB,GAA2BT,IAAI,CAACU,IAAL,CAAUL,KAAV,CAA9C;IACA,IAAMO,IAAI,GAAG,UAAG,CAACC,KAAJ,MAAS,IAAT,IAASC,aAAT,GAAS,MAAT,GAASA,GAAEF,IAAX,KAAmBrB,GAAG,CAACwB,KAAvB,KAA4B,MAAIxB,GAAG,CAACyB,YAAR,MAAoB,IAApB,IAAoBC,aAApB,GAAoB,MAApB,GAAoBA,GAAEL,IAAlD,CAAb;IACA,IAAMM,OAAO,GAAG1B,KAAK,CAAC2B,QAAN,CAAe,MAAf,EAAuB;MACrCC,KAAK;QACH1B,CAAC,EAAED,EAAE,GAAGkB,UAAU,GAAG,CADlB;QAEHf,CAAC,EAAED,EAAE,GAAGgB,UAAU,GAAG,CAFlB;QAGHZ,KAAK,EAAEY,UAHJ;QAIHT,MAAM,EAAES;MAJL,GAKApB,GAAG,CAACyB,YALJ,GAMAzB,GAAG,CAACsB,KANJ,GAMS;QACZD,IAAI;MADQ,CANT;IADgC,CAAvB,CAAhB;IAWA,OAAOM,OAAP;EACD;AA3BgC,CAAtB,CAAb","names":["registerShape","draw","cfg","group","cx","x","cy","y","points","parsePoints","width","Math","abs","height","maxSideLength","min","value","Number","shape","sizeRatio","lenRatio","sqrt","sideLength","fill","style","_a","color","defaultStyle","_b","polygon","addShape","attrs"],"sourceRoot":"","sources":["../../../../src/plots/heatmap/shapes/square.ts"],"sourcesContent":["import { registerShape, Types, IGroup } from '@antv/g2';\n\nregisterShape('polygon', 'square', {\n  draw(cfg: Types.ShapeInfo, group: IGroup) {\n    const cx = cfg.x as number;\n    const cy = cfg.y as number;\n\n    const points = this.parsePoints(cfg.points);\n    const width = Math.abs(points[2].x - points[1].x);\n    const height = Math.abs(points[1].y - points[0].y);\n    const maxSideLength = Math.min(width, height);\n\n    const value = Number(cfg.shape[1]);\n    const sizeRatio = Number(cfg.shape[2]);\n    const lenRatio = Math.sqrt(sizeRatio);\n    const sideLength = maxSideLength * lenRatio * Math.sqrt(value);\n    const fill = cfg.style?.fill || cfg.color || cfg.defaultStyle?.fill;\n    const polygon = group.addShape('rect', {\n      attrs: {\n        x: cx - sideLength / 2,\n        y: cy - sideLength / 2,\n        width: sideLength,\n        height: sideLength,\n        ...cfg.defaultStyle,\n        ...cfg.style,\n        fill,\n      },\n    });\n    return polygon;\n  },\n});\n"]},"metadata":{},"sourceType":"module"}