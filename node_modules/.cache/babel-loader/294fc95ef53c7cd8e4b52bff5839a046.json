{"ast":null,"code":"import { __assign, __extends } from \"tslib\";\nimport { clone, each } from '@antv/util';\nimport GroupComponent from '../abstract/group-component';\nimport { regionToBBox } from '../util/util';\n\nvar RegionFilterAnnotation =\n/** @class */\nfunction (_super) {\n  __extends(RegionFilterAnnotation, _super);\n\n  function RegionFilterAnnotation() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  /**\n   * 默认的配置项\n   * @returns {object} 默认的配置项\n   */\n\n\n  RegionFilterAnnotation.prototype.getDefaultCfg = function () {\n    var cfg = _super.prototype.getDefaultCfg.call(this);\n\n    return __assign(__assign({}, cfg), {\n      name: 'annotation',\n      type: 'regionFilter',\n      locationType: 'region',\n      start: null,\n      end: null,\n      color: null,\n      shape: []\n    });\n  };\n\n  RegionFilterAnnotation.prototype.renderInner = function (group) {\n    var _this = this;\n\n    var start = this.get('start');\n    var end = this.get('end'); // 1. add region layer\n\n    var layer = this.addGroup(group, {\n      id: this.getElementId('region-filter'),\n      capture: false\n    }); // 2. clone shape & color it\n\n    each(this.get('shapes'), function (shape, shapeIdx) {\n      var type = shape.get('type');\n      var attrs = clone(shape.attr());\n\n      _this.adjustShapeAttrs(attrs);\n\n      _this.addShape(layer, {\n        id: _this.getElementId(\"shape-\" + type + \"-\" + shapeIdx),\n        capture: false,\n        type: type,\n        attrs: attrs\n      });\n    }); // 3. clip\n\n    var clipBBox = regionToBBox({\n      start: start,\n      end: end\n    });\n    layer.setClip({\n      type: 'rect',\n      attrs: {\n        x: clipBBox.minX,\n        y: clipBBox.minY,\n        width: clipBBox.width,\n        height: clipBBox.height\n      }\n    });\n  };\n\n  RegionFilterAnnotation.prototype.adjustShapeAttrs = function (attr) {\n    var color = this.get('color');\n\n    if (attr.fill) {\n      attr.fill = attr.fillStyle = color;\n    }\n\n    attr.stroke = attr.strokeStyle = color;\n  };\n\n  return RegionFilterAnnotation;\n}(GroupComponent);\n\nexport default RegionFilterAnnotation;","map":{"version":3,"mappings":";AACA,SAASA,KAAT,EAAgBC,IAAhB,QAA4B,YAA5B;AACA,OAAOC,cAAP,MAA2B,6BAA3B;AAGA,SAASC,YAAT,QAA6B,cAA7B;;AAEA;AAAA;AAAA;EAAqCC;;EAArC;;EA8DC;EA7DC;;;;;;EAIOC,iDAAP;IACE,IAAMC,GAAG,GAAGC,iBAAMC,aAAN,CAAmBC,IAAnB,CAAmB,IAAnB,CAAZ;;IACA,6BACKH,GADL,GACQ;MACNI,IAAI,EAAE,YADA;MAENC,IAAI,EAAE,cAFA;MAGNC,YAAY,EAAE,QAHR;MAINC,KAAK,EAAE,IAJD;MAKNC,GAAG,EAAE,IALC;MAMNC,KAAK,EAAE,IAND;MAONC,KAAK,EAAE;IAPD,CADR;EAUD,CAZM;;EAcGX,+CAAV,UAAsBY,KAAtB,EAAmC;IAAnC;;IACE,IAAMJ,KAAK,GAAU,KAAKK,GAAL,CAAS,OAAT,CAArB;IACA,IAAMJ,GAAG,GAAU,KAAKI,GAAL,CAAS,KAAT,CAAnB,CAFiC,CAIjC;;IACA,IAAMC,KAAK,GAAW,KAAKC,QAAL,CAAcH,KAAd,EAAqB;MACzCI,EAAE,EAAE,KAAKC,YAAL,CAAkB,eAAlB,CADqC;MAEzCC,OAAO,EAAE;IAFgC,CAArB,CAAtB,CALiC,CAUjC;;IACAtB,IAAI,CAAC,KAAKiB,GAAL,CAAS,QAAT,CAAD,EAAqB,UAACF,KAAD,EAAgBQ,QAAhB,EAAgC;MACvD,IAAMb,IAAI,GAAGK,KAAK,CAACE,GAAN,CAAU,MAAV,CAAb;MACA,IAAMO,KAAK,GAAGzB,KAAK,CAACgB,KAAK,CAACU,IAAN,EAAD,CAAnB;;MACAC,KAAI,CAACC,gBAAL,CAAsBH,KAAtB;;MACAE,KAAI,CAACE,QAAL,CAAcV,KAAd,EAAqB;QACnBE,EAAE,EAAEM,KAAI,CAACL,YAAL,CAAkB,WAASX,IAAT,GAAa,GAAb,GAAiBa,QAAnC,CADe;QAEnBD,OAAO,EAAE,KAFU;QAGnBZ,IAAI,MAHe;QAInBc,KAAK;MAJc,CAArB;IAMD,CAVG,CAAJ,CAXiC,CAuBjC;;IACA,IAAMK,QAAQ,GAAG3B,YAAY,CAAC;MAAEU,KAAK,OAAP;MAASC,GAAG;IAAZ,CAAD,CAA7B;IACAK,KAAK,CAACY,OAAN,CAAc;MACZpB,IAAI,EAAE,MADM;MAEZc,KAAK,EAAE;QACLO,CAAC,EAAEF,QAAQ,CAACG,IADP;QAELC,CAAC,EAAEJ,QAAQ,CAACK,IAFP;QAGLC,KAAK,EAAEN,QAAQ,CAACM,KAHX;QAILC,MAAM,EAAEP,QAAQ,CAACO;MAJZ;IAFK,CAAd;EASD,CAlCS;;EAoCFhC,oDAAR,UAAyBqB,IAAzB,EAAyC;IACvC,IAAMX,KAAK,GAAG,KAAKG,GAAL,CAAS,OAAT,CAAd;;IACA,IAAIQ,IAAI,CAACY,IAAT,EAAe;MACbZ,IAAI,CAACY,IAAL,GAAYZ,IAAI,CAACa,SAAL,GAAiBxB,KAA7B;IACD;;IACDW,IAAI,CAACc,MAAL,GAAcd,IAAI,CAACe,WAAL,GAAmB1B,KAAjC;EACD,CANO;;EAOV;AAAC,CA9DD,CAAqCb,cAArC;;AAgEA,eAAeG,sBAAf","names":["clone","each","GroupComponent","regionToBBox","__extends","RegionFilterAnnotation","cfg","_super","getDefaultCfg","call","name","type","locationType","start","end","color","shape","group","get","layer","addGroup","id","getElementId","capture","shapeIdx","attrs","attr","_this","adjustShapeAttrs","addShape","clipBBox","setClip","x","minX","y","minY","width","height","fill","fillStyle","stroke","strokeStyle"],"sourceRoot":"","sources":["../../src/annotation/region-filter.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}