{"ast":null,"code":"import { __assign, __extends, __rest } from \"tslib\";\nimport { difference, each, isNil, keys, mix, pick } from '@antv/util';\nimport { propagationDelegate } from '../util/event';\nimport { applyMatrix2BBox, getMatrixByTranslate } from '../util/matrix';\nimport { getBBoxWithClip, updateClip } from '../util/util';\nimport Component from './component';\nvar STATUS_UPDATE = 'update_status';\nvar COPY_PROPERTIES = ['visible', 'tip', 'delegateObject']; // 更新对象时需要复制的属性\n\nvar COPY_PROPERTIES_EXCLUDES = ['container', 'group', 'shapesMap', 'isRegister', 'isUpdating', 'destroyed']; // 更新子组件时排除的属性\n\nvar GroupComponent =\n/** @class */\nfunction (_super) {\n  __extends(GroupComponent, _super);\n\n  function GroupComponent() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  GroupComponent.prototype.getDefaultCfg = function () {\n    var cfg = _super.prototype.getDefaultCfg.call(this);\n\n    return __assign(__assign({}, cfg), {\n      container: null,\n\n      /**\n       * @private\n       * 缓存图形的 Map\n       */\n      shapesMap: {},\n      group: null,\n      capture: true,\n\n      /**\n       * @private 组件或者图形是否允许注册\n       * @type {false}\n       */\n      isRegister: false,\n\n      /**\n       * @private 是否正在更新\n       * @type {false}\n       */\n      isUpdating: false,\n\n      /**\n       * @private\n       * 是否初始状态，一旦 render，update 后，这个状态就变成 false, clear 后恢复\n       */\n      isInit: true\n    });\n  };\n\n  GroupComponent.prototype.remove = function () {\n    this.clear();\n    var group = this.get('group');\n    group.remove();\n  };\n\n  GroupComponent.prototype.clear = function () {\n    var group = this.get('group');\n    group.clear();\n    this.set('shapesMap', {});\n    this.clearOffScreenCache();\n    this.set('isInit', true);\n  };\n\n  GroupComponent.prototype.getChildComponentById = function (id) {\n    var group = this.getElementById(id);\n    var inst = group && group.get('component');\n    return inst;\n  };\n\n  GroupComponent.prototype.getElementById = function (id) {\n    return this.get('shapesMap')[id];\n  };\n\n  GroupComponent.prototype.getElementByLocalId = function (localId) {\n    var id = this.getElementId(localId);\n    return this.getElementById(id);\n  };\n\n  GroupComponent.prototype.getElementsByName = function (name) {\n    var rst = [];\n    each(this.get('shapesMap'), function (elem) {\n      if (elem.get('name') === name) {\n        rst.push(elem);\n      }\n    });\n    return rst;\n  };\n\n  GroupComponent.prototype.getContainer = function () {\n    return this.get('container');\n  };\n\n  GroupComponent.prototype.updateInner = function (cfg) {\n    // this.updateInner();\n    // this.set('isUpdating', false);\n    this.offScreenRender();\n\n    if (this.get('updateAutoRender')) {\n      this.render();\n    }\n  };\n\n  GroupComponent.prototype.render = function () {\n    var offScreenGroup = this.get('offScreenGroup');\n\n    if (!offScreenGroup) {\n      offScreenGroup = this.offScreenRender();\n    }\n\n    var group = this.get('group');\n    this.updateElements(offScreenGroup, group);\n    this.deleteElements();\n    this.applyOffset();\n\n    if (!this.get('eventInitted')) {\n      this.initEvent();\n      this.set('eventInitted', true);\n    }\n\n    this.set('isInit', false);\n  };\n\n  GroupComponent.prototype.show = function () {\n    var group = this.get('group');\n    group.show();\n    this.set('visible', true);\n  };\n\n  GroupComponent.prototype.hide = function () {\n    var group = this.get('group');\n    group.hide();\n    this.set('visible', false);\n  };\n\n  GroupComponent.prototype.setCapture = function (capture) {\n    var group = this.get('group');\n    group.set('capture', capture);\n    this.set('capture', capture);\n  };\n\n  GroupComponent.prototype.destroy = function () {\n    this.removeEvent();\n    this.remove();\n\n    _super.prototype.destroy.call(this);\n  };\n\n  GroupComponent.prototype.getBBox = function () {\n    return this.get('group').getCanvasBBox();\n  };\n\n  GroupComponent.prototype.getLayoutBBox = function () {\n    var group = this.get('group'); // 防止被 clear 了，offScreenBBox 不存在\n\n    var bbox = this.getInnerLayoutBBox();\n    var matrix = group.getTotalMatrix();\n\n    if (matrix) {\n      bbox = applyMatrix2BBox(matrix, bbox);\n    }\n\n    return bbox; // 默认返回 getBBox，不同的组件内部单独实现\n  }; // 复写 on, off, emit 透传到 group\n\n\n  GroupComponent.prototype.on = function (evt, callback, once) {\n    var group = this.get('group');\n    group.on(evt, callback, once);\n    return this;\n  };\n\n  GroupComponent.prototype.off = function (evt, callback) {\n    var group = this.get('group');\n    group && group.off(evt, callback);\n    return this;\n  };\n\n  GroupComponent.prototype.emit = function (eventName, eventObject) {\n    var group = this.get('group');\n    group.emit(eventName, eventObject);\n  };\n\n  GroupComponent.prototype.init = function () {\n    _super.prototype.init.call(this);\n\n    if (!this.get('group')) {\n      this.initGroup();\n    }\n\n    this.offScreenRender(); // 绘制离屏 group\n  }; // 获取组件内部布局占的包围盒\n\n\n  GroupComponent.prototype.getInnerLayoutBBox = function () {\n    return this.get('offScreenBBox') || this.get('group').getBBox();\n  }; // 抛出委托对象\n\n\n  GroupComponent.prototype.delegateEmit = function (eventName, eventObject) {\n    var group = this.get('group');\n    eventObject.target = group;\n    group.emit(eventName, eventObject);\n    propagationDelegate(group, eventName, eventObject);\n  }; // 创建离屏的 group ,不添加在 canvas 中\n\n\n  GroupComponent.prototype.createOffScreenGroup = function () {\n    var group = this.get('group');\n    var GroupClass = group.getGroupBase(); // 获取分组的构造函数\n\n    var newGroup = new GroupClass({\n      delegateObject: this.getDelegateObject()\n    });\n    return newGroup;\n  }; // 应用 offset\n\n\n  GroupComponent.prototype.applyOffset = function () {\n    var offsetX = this.get('offsetX');\n    var offsetY = this.get('offsetY');\n    this.moveElementTo(this.get('group'), {\n      x: offsetX,\n      y: offsetY\n    });\n  };\n\n  GroupComponent.prototype.initGroup = function () {\n    var container = this.get('container');\n    this.set('group', container.addGroup({\n      id: this.get('id'),\n      name: this.get('name'),\n      capture: this.get('capture'),\n      visible: this.get('visible'),\n      isComponent: true,\n      component: this,\n      delegateObject: this.getDelegateObject()\n    }));\n  }; // 离屏渲染\n\n\n  GroupComponent.prototype.offScreenRender = function () {\n    this.clearOffScreenCache();\n    var offScreenGroup = this.createOffScreenGroup();\n    this.renderInner(offScreenGroup);\n    this.set('offScreenGroup', offScreenGroup); // 包含包围盒的 bbox\n\n    this.set('offScreenBBox', getBBoxWithClip(offScreenGroup));\n    return offScreenGroup;\n  };\n  /**\n   * @protected\n   * 在组件上添加分组，主要解决 isReigeter 的问题\n   * @param {IGroup} parent 父元素\n   * @param {object} cfg    分组的配置项\n   */\n\n\n  GroupComponent.prototype.addGroup = function (parent, cfg) {\n    this.appendDelegateObject(parent, cfg);\n    var group = parent.addGroup(cfg);\n\n    if (this.get('isRegister')) {\n      this.registerElement(group);\n    }\n\n    return group;\n  };\n  /**\n   * @protected\n   * 在组件上添加图形，主要解决 isReigeter 的问题\n   * @param {IGroup} parent 父元素\n   * @param {object} cfg    分组的配置项\n   */\n\n\n  GroupComponent.prototype.addShape = function (parent, cfg) {\n    this.appendDelegateObject(parent, cfg);\n    var shape = parent.addShape(cfg);\n\n    if (this.get('isRegister')) {\n      this.registerElement(shape);\n    }\n\n    return shape;\n  };\n  /**\n   * 在组件上添加子组件\n   *\n   * @param parent 父元素\n   * @param cfg 子组件配置项\n   */\n\n\n  GroupComponent.prototype.addComponent = function (parent, cfg) {\n    var id = cfg.id,\n        Ctor = cfg.component,\n        restCfg = __rest(cfg, [\"id\", \"component\"]); // @ts-ignore\n\n\n    var inst = new Ctor(__assign(__assign({}, restCfg), {\n      id: id,\n      container: parent,\n      updateAutoRender: this.get('updateAutoRender')\n    }));\n    inst.init();\n    inst.render();\n\n    if (this.get('isRegister')) {\n      this.registerElement(inst.get('group'));\n    }\n\n    return inst;\n  };\n\n  GroupComponent.prototype.initEvent = function () {};\n\n  GroupComponent.prototype.removeEvent = function () {\n    var group = this.get('group');\n    group.off();\n  };\n\n  GroupComponent.prototype.getElementId = function (localId) {\n    var id = this.get('id'); // 组件的 Id\n\n    var name = this.get('name'); // 组件的名称\n\n    return id + \"-\" + name + \"-\" + localId;\n  };\n\n  GroupComponent.prototype.registerElement = function (element) {\n    var id = element.get('id');\n    this.get('shapesMap')[id] = element;\n  };\n\n  GroupComponent.prototype.unregisterElement = function (element) {\n    var id = element.get('id');\n    delete this.get('shapesMap')[id];\n  }; // 移动元素\n\n\n  GroupComponent.prototype.moveElementTo = function (element, point) {\n    var matrix = getMatrixByTranslate(point);\n    element.attr('matrix', matrix);\n  };\n  /**\n   * 图形元素新出现时的动画，默认图形从透明度 0 到当前透明度\n   * @protected\n   * @param {string} elmentName 图形元素名称\n   * @param {IElement} newElement  新的图形元素\n   * @param {object} animateCfg 动画的配置项\n   */\n\n\n  GroupComponent.prototype.addAnimation = function (elmentName, newElement, animateCfg) {\n    // 缓存透明度\n    var originOpacity = newElement.attr('opacity');\n\n    if (isNil(originOpacity)) {\n      originOpacity = 1;\n    }\n\n    newElement.attr('opacity', 0);\n    newElement.animate({\n      opacity: originOpacity\n    }, animateCfg);\n  };\n  /**\n   * 图形元素新出现时的动画，默认图形从透明度 0 到当前透明度\n   * @protected\n   * @param {string} elmentName 图形元素名称\n   * @param {IElement} originElement 要删除的图形元素\n   * @param {object} animateCfg 动画的配置项\n   */\n\n\n  GroupComponent.prototype.removeAnimation = function (elementName, originElement, animateCfg) {\n    originElement.animate({\n      opacity: 0\n    }, animateCfg);\n  };\n  /**\n   * 图形元素的更新动画\n   * @param {string} elmentName 图形元素名称\n   * @param {IElement} originElement 现有的图形元素\n   * @param {object} newAttrs  新的图形元素\n   * @param {object} animateCfg 动画的配置项\n   */\n\n\n  GroupComponent.prototype.updateAnimation = function (elementName, originElement, newAttrs, animateCfg) {\n    originElement.animate(newAttrs, animateCfg);\n  }; // 更新组件的图形\n\n\n  GroupComponent.prototype.updateElements = function (newGroup, originGroup) {\n    var _this = this;\n\n    var animate = this.get('animate');\n    var animateOption = this.get('animateOption');\n    var children = newGroup.getChildren().slice(0); // 创建一个新数组，防止添加到 originGroup 时， children 变动\n\n    var preElement; // 前面已经匹配到的图形元素，用于\n\n    each(children, function (element) {\n      var elementId = element.get('id');\n\n      var originElement = _this.getElementById(elementId);\n\n      var elementName = element.get('name');\n\n      if (originElement) {\n        if (element.get('isComponent')) {\n          // 嵌套子组件更新\n          var childComponent = element.get('component');\n          var origChildComponent = originElement.get('component');\n          var newCfg = pick(childComponent.cfg, difference(keys(childComponent.cfg), COPY_PROPERTIES_EXCLUDES));\n          origChildComponent.update(newCfg);\n          originElement.set(STATUS_UPDATE, 'update');\n        } else {\n          var replaceAttrs = _this.getReplaceAttrs(originElement, element); // 更新\n\n\n          if (animate && animateOption.update) {\n            // 没有动画\n            _this.updateAnimation(elementName, originElement, replaceAttrs, animateOption.update);\n          } else {\n            // originElement.attrs = replaceAttrs; // 直接替换\n            originElement.attr(replaceAttrs);\n          } // 如果是分组，则继续执行\n\n\n          if (element.isGroup()) {\n            _this.updateElements(element, originElement);\n          } // 复制属性\n\n\n          each(COPY_PROPERTIES, function (name) {\n            originElement.set(name, element.get(name));\n          });\n          updateClip(originElement, element);\n          preElement = originElement; // 执行完更新后设置状态位为更新\n\n          originElement.set(STATUS_UPDATE, 'update');\n        }\n      } else {\n        // 没有对应的图形，则插入当前图形\n        originGroup.add(element); // 应该在 group 加个 insertAt 的方法\n\n        var siblings = originGroup.getChildren(); // 兄弟节点\n\n        siblings.splice(siblings.length - 1, 1); // 先从数组中移除，然后放到合适的位置\n\n        if (preElement) {\n          // 前面已经有更新的图形或者插入的图形，则在这个图形后面插入\n          var index = siblings.indexOf(preElement);\n          siblings.splice(index + 1, 0, element); // 在已经更新的图形元素后面插入\n        } else {\n          siblings.unshift(element);\n        }\n\n        _this.registerElement(element); // 注册节点\n\n\n        element.set(STATUS_UPDATE, 'add'); // 执行完更新后设置状态位为添加\n\n        if (element.get('isComponent')) {\n          // 直接新增子组件container属性，实例不变\n          var childComponent = element.get('component');\n          childComponent.set('container', originGroup);\n        } else if (element.isGroup()) {\n          // 如果元素是新增加的元素，则遍历注册所有的子节点\n          _this.registerNewGroup(element);\n        }\n\n        preElement = element;\n\n        if (animate) {\n          var animateCfg = _this.get('isInit') ? animateOption.appear : animateOption.enter;\n\n          if (animateCfg) {\n            _this.addAnimation(elementName, element, animateCfg);\n          }\n        }\n      }\n    });\n  };\n\n  GroupComponent.prototype.clearUpdateStatus = function (group) {\n    var children = group.getChildren();\n    each(children, function (el) {\n      el.set(STATUS_UPDATE, null); // 清理掉更新状态\n    });\n  }; // 清理离屏缓存\n\n\n  GroupComponent.prototype.clearOffScreenCache = function () {\n    var offScreenGroup = this.get('offScreenGroup');\n\n    if (offScreenGroup) {\n      // 销毁原先的离线 Group\n      offScreenGroup.destroy();\n    }\n\n    this.set('offScreenGroup', null);\n    this.set('offScreenBBox', null);\n  }; // private updateInner() {\n  //   const group = this.get('group');\n  //   const newGroup = this.createOffScreenGroup();\n  //   this.renderInner(newGroup);\n  //   this.applyOffset();\n  //   this.updateElements(newGroup, group);\n  //   this.deleteElements();\n  //   newGroup.destroy(); // 销毁虚拟分组\n  // }\n  // 获取发生委托时的对象，在事件中抛出\n\n\n  GroupComponent.prototype.getDelegateObject = function () {\n    var _a;\n\n    var name = this.get('name');\n    var delegateObject = (_a = {}, _a[name] = this, _a.component = this, _a);\n    return delegateObject;\n  }; // 附加委托信息，用于事件\n\n\n  GroupComponent.prototype.appendDelegateObject = function (parent, cfg) {\n    var parentObject = parent.get('delegateObject');\n\n    if (!cfg.delegateObject) {\n      cfg.delegateObject = {};\n    }\n\n    mix(cfg.delegateObject, parentObject); // 将父元素上的委托信息复制到自身\n  }; // 获取需要替换的属性，如果原先图形元素存在，而新图形不存在，则设置 undefined\n\n\n  GroupComponent.prototype.getReplaceAttrs = function (originElement, newElement) {\n    var originAttrs = originElement.attr();\n    var newAttrs = newElement.attr();\n    each(originAttrs, function (v, k) {\n      if (newAttrs[k] === undefined) {\n        newAttrs[k] = undefined;\n      }\n    });\n    return newAttrs;\n  };\n\n  GroupComponent.prototype.registerNewGroup = function (group) {\n    var _this = this;\n\n    var children = group.getChildren();\n    each(children, function (element) {\n      _this.registerElement(element); // 注册节点\n\n\n      element.set(STATUS_UPDATE, 'add'); // 执行完更新后设置状态位为添加\n\n      if (element.isGroup()) {\n        _this.registerNewGroup(element);\n      }\n    });\n  }; // 移除多余的元素\n\n\n  GroupComponent.prototype.deleteElements = function () {\n    var _this = this;\n\n    var shapesMap = this.get('shapesMap');\n    var deleteArray = []; // 遍历获取需要删除的图形元素\n\n    each(shapesMap, function (element, id) {\n      if (!element.get(STATUS_UPDATE) || element.destroyed) {\n        deleteArray.push([id, element]);\n      } else {\n        element.set(STATUS_UPDATE, null); // 清理掉更新状态\n      }\n    });\n    var animate = this.get('animate');\n    var animateOption = this.get('animateOption'); // 删除图形元素\n\n    each(deleteArray, function (item) {\n      var id = item[0],\n          element = item[1];\n\n      if (!element.destroyed) {\n        var elementName = element.get('name');\n\n        if (animate && animateOption.leave) {\n          // 需要动画结束时移除图形\n          var callbackAnimCfg = mix({\n            callback: function () {\n              _this.removeElement(element);\n            }\n          }, animateOption.leave);\n\n          _this.removeAnimation(elementName, element, callbackAnimCfg);\n        } else {\n          _this.removeElement(element);\n        }\n      }\n\n      delete shapesMap[id]; // 从缓存中移除\n    });\n  };\n\n  GroupComponent.prototype.removeElement = function (element) {\n    if (element.get('isGroup')) {\n      var component = element.get('component');\n\n      if (component) {\n        component.destroy();\n      }\n    }\n\n    element.remove();\n  };\n\n  return GroupComponent;\n}(Component);\n\nexport default GroupComponent;","map":{"version":3,"mappings":"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","names":["difference","each","isNil","keys","mix","pick","propagationDelegate","applyMatrix2BBox","getMatrixByTranslate","getBBoxWithClip","updateClip","Component","STATUS_UPDATE","COPY_PROPERTIES","COPY_PROPERTIES_EXCLUDES","__extends","GroupComponent","cfg","_super","getDefaultCfg","call","container","shapesMap","group","capture","isRegister","isUpdating","isInit","clear","get","remove","set","clearOffScreenCache","id","getElementById","inst","localId","getElementId","name","rst","elem","push","offScreenRender","render","offScreenGroup","updateElements","deleteElements","applyOffset","initEvent","show","hide","removeEvent","destroy","getCanvasBBox","bbox","getInnerLayoutBBox","matrix","getTotalMatrix","evt","callback","once","on","off","eventName","eventObject","emit","init","initGroup","getBBox","target","GroupClass","getGroupBase","newGroup","delegateObject","getDelegateObject","offsetX","offsetY","moveElementTo","x","y","addGroup","visible","isComponent","component","createOffScreenGroup","renderInner","parent","appendDelegateObject","registerElement","shape","addShape","Ctor","restCfg","__assign","updateAutoRender","element","point","attr","elmentName","newElement","animateCfg","originOpacity","animate","opacity","elementName","originElement","newAttrs","originGroup","animateOption","children","getChildren","slice","preElement","elementId","_this","childComponent","origChildComponent","newCfg","update","replaceAttrs","getReplaceAttrs","updateAnimation","isGroup","add","siblings","splice","length","index","indexOf","unshift","registerNewGroup","appear","enter","addAnimation","el","_a","parentObject","originAttrs","v","k","undefined","deleteArray","destroyed","item","leave","callbackAnimCfg","removeElement","removeAnimation"],"sourceRoot":"","sources":["../../src/abstract/group-component.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}