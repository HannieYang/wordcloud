{"ast":null,"code":"import { __assign } from \"tslib\";\nimport { get, isFunction } from '@antv/util';\nimport { interaction, animation, theme, tooltip, scale } from '../../adaptor/common';\nimport { flow, transformLabel, deepAssign } from '../../utils';\nimport { interval, point } from '../../adaptor/geometries';\nimport { transformData } from './utils';\n/**\n * geometry 处理\n * @param params\n */\n\nfunction geometry(params) {\n  var chart = params.chart,\n      options = params.options;\n  var bulletStyle = options.bulletStyle,\n      targetField = options.targetField,\n      rangeField = options.rangeField,\n      measureField = options.measureField,\n      xField = options.xField,\n      color = options.color,\n      layout = options.layout,\n      size = options.size,\n      label = options.label; // 处理数据\n\n  var _a = transformData(options),\n      min = _a.min,\n      max = _a.max,\n      ds = _a.ds;\n\n  chart.data(ds); // rangeGeometry\n\n  var r = deepAssign({}, params, {\n    options: {\n      xField: xField,\n      yField: rangeField,\n      seriesField: 'rKey',\n      isStack: true,\n      label: get(label, 'range'),\n      interval: {\n        color: get(color, 'range'),\n        style: get(bulletStyle, 'range'),\n        size: get(size, 'range')\n      }\n    }\n  });\n  interval(r); // 范围值的 tooltip 隐藏掉\n\n  chart.geometries[0].tooltip(false); // measureGeometry\n\n  var m = deepAssign({}, params, {\n    options: {\n      xField: xField,\n      yField: measureField,\n      seriesField: 'mKey',\n      isStack: true,\n      label: get(label, 'measure'),\n      interval: {\n        color: get(color, 'measure'),\n        style: get(bulletStyle, 'measure'),\n        size: get(size, 'measure')\n      }\n    }\n  });\n  interval(m); // targetGeometry\n\n  var t = deepAssign({}, params, {\n    options: {\n      xField: xField,\n      yField: targetField,\n      seriesField: 'tKey',\n      label: get(label, 'target'),\n      point: {\n        color: get(color, 'target'),\n        style: get(bulletStyle, 'target'),\n        size: isFunction(get(size, 'target')) ? function (data) {\n          return get(size, 'target')(data) / 2;\n        } : get(size, 'target') / 2,\n        shape: layout === 'horizontal' ? 'line' : 'hyphen'\n      }\n    }\n  });\n  point(t); // 水平的时候，要转换坐标轴\n\n  if (layout === 'horizontal') {\n    chart.coordinate().transpose();\n  }\n\n  return __assign(__assign({}, params), {\n    ext: {\n      data: {\n        min: min,\n        max: max\n      }\n    }\n  });\n}\n/**\n * meta 配置\n * @param params\n */\n\n\nexport function meta(params) {\n  var _a, _b;\n\n  var options = params.options,\n      ext = params.ext;\n  var xAxis = options.xAxis,\n      yAxis = options.yAxis,\n      targetField = options.targetField,\n      rangeField = options.rangeField,\n      measureField = options.measureField,\n      xField = options.xField;\n  var extData = ext.data;\n  return flow(scale((_a = {}, _a[xField] = xAxis, _a[measureField] = yAxis, _a), (_b = {}, _b[measureField] = {\n    min: extData === null || extData === void 0 ? void 0 : extData.min,\n    max: extData === null || extData === void 0 ? void 0 : extData.max,\n    sync: true\n  }, _b[targetField] = {\n    sync: \"\" + measureField\n  }, _b[rangeField] = {\n    sync: \"\" + measureField\n  }, _b)))(params);\n}\n/**\n * axis 配置\n * @param params\n */\n\nfunction axis(params) {\n  var chart = params.chart,\n      options = params.options;\n  var xAxis = options.xAxis,\n      yAxis = options.yAxis,\n      xField = options.xField,\n      measureField = options.measureField,\n      rangeField = options.rangeField,\n      targetField = options.targetField;\n  chart.axis(\"\" + rangeField, false);\n  chart.axis(\"\" + targetField, false); // 为 false 则是不显示轴\n\n  if (xAxis === false) {\n    chart.axis(\"\" + xField, false);\n  } else {\n    chart.axis(\"\" + xField, xAxis);\n  }\n\n  if (yAxis === false) {\n    chart.axis(\"\" + measureField, false);\n  } else {\n    chart.axis(\"\" + measureField, yAxis);\n  }\n\n  return params;\n}\n/**\n * legend 配置\n * @param params\n */\n\n\nfunction legend(params) {\n  var chart = params.chart,\n      options = params.options;\n  var legend = options.legend;\n  chart.removeInteraction('legend-filter'); // @TODO 后续看是否内部自定义一个 legend\n\n  chart.legend(legend); // 默认关闭掉所在 color 字段的 legend, 从而不影响自定义的legend\n\n  chart.legend('rKey', false);\n  chart.legend('mKey', false);\n  chart.legend('tKey', false);\n  return params;\n}\n/**\n * label 配置\n * @param params\n */\n\n\nfunction label(params) {\n  var chart = params.chart,\n      options = params.options;\n  var label = options.label,\n      measureField = options.measureField,\n      targetField = options.targetField,\n      rangeField = options.rangeField;\n  var _a = chart.geometries,\n      rangeGeometry = _a[0],\n      measureGeometry = _a[1],\n      targetGeometry = _a[2];\n\n  if (get(label, 'range')) {\n    rangeGeometry.label(\"\" + rangeField, __assign({\n      layout: [{\n        type: 'limit-in-plot'\n      }]\n    }, transformLabel(label.range)));\n  } else {\n    rangeGeometry.label(false);\n  }\n\n  if (get(label, 'measure')) {\n    measureGeometry.label(\"\" + measureField, __assign({\n      layout: [{\n        type: 'limit-in-plot'\n      }]\n    }, transformLabel(label.measure)));\n  } else {\n    measureGeometry.label(false);\n  }\n\n  if (get(label, 'target')) {\n    targetGeometry.label(\"\" + targetField, __assign({\n      layout: [{\n        type: 'limit-in-plot'\n      }]\n    }, transformLabel(label.target)));\n  } else {\n    targetGeometry.label(false);\n  }\n\n  return params;\n}\n/**\n * 子弹图适配器\n * @param chart\n * @param options\n */\n\n\nexport function adaptor(params) {\n  // flow 的方式处理所有的配置到 G2 API\n  flow(geometry, meta, axis, legend, theme, label, tooltip, interaction, animation)(params);\n}","map":{"version":3,"mappings":"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","names":["get","isFunction","interaction","animation","theme","tooltip","scale","flow","transformLabel","deepAssign","interval","point","transformData","geometry","params","options","targetField","rangeField","measureField","xField","color","layout","size","label","min","max","ds","chart","data","r","yField","seriesField","isStack","style","bulletStyle","geometries","m","t","shape","coordinate","transpose","ext","meta","yAxis","extData","_a","xAxis","_b","sync","axis","legend","removeInteraction","rangeGeometry","measureGeometry","targetGeometry","__assign","type","range","measure","target","adaptor"],"sourceRoot":"","sources":["../../../src/plots/bullet/adaptor.ts"],"sourcesContent":["import { get, isFunction } from '@antv/util';\nimport { Params } from '../../core/adaptor';\nimport { interaction, animation, theme, tooltip, scale } from '../../adaptor/common';\nimport { flow, transformLabel, deepAssign } from '../../utils';\nimport { Datum } from '../../types';\nimport { interval, point } from '../../adaptor/geometries';\nimport { BulletOptions } from './types';\nimport { transformData } from './utils';\n\n/**\n * geometry 处理\n * @param params\n */\nfunction geometry(params: Params<BulletOptions>): Params<BulletOptions> {\n  const { chart, options } = params;\n  const { bulletStyle, targetField, rangeField, measureField, xField, color, layout, size, label } = options;\n  // 处理数据\n  const { min, max, ds } = transformData(options);\n  chart.data(ds);\n\n  // rangeGeometry\n  const r = deepAssign({}, params, {\n    options: {\n      xField: xField,\n      yField: rangeField,\n      seriesField: 'rKey',\n      isStack: true,\n      label: get(label, 'range'),\n      interval: {\n        color: get(color, 'range'),\n        style: get(bulletStyle, 'range'),\n        size: get(size, 'range'),\n      },\n    },\n  });\n  interval(r);\n  // 范围值的 tooltip 隐藏掉\n  chart.geometries[0].tooltip(false);\n\n  // measureGeometry\n  const m = deepAssign({}, params, {\n    options: {\n      xField: xField,\n      yField: measureField,\n      seriesField: 'mKey',\n      isStack: true,\n      label: get(label, 'measure'),\n      interval: {\n        color: get(color, 'measure'),\n        style: get(bulletStyle, 'measure'),\n        size: get(size, 'measure'),\n      },\n    },\n  });\n  interval(m);\n\n  // targetGeometry\n  const t = deepAssign({}, params, {\n    options: {\n      xField: xField,\n      yField: targetField,\n      seriesField: 'tKey',\n      label: get(label, 'target'),\n      point: {\n        color: get(color, 'target'),\n        style: get(bulletStyle, 'target'),\n        size: isFunction(get(size, 'target'))\n          ? (data: Datum) => get(size, 'target')(data) / 2\n          : get(size, 'target') / 2,\n        shape: layout === 'horizontal' ? 'line' : 'hyphen',\n      },\n    },\n  });\n  point(t);\n\n  // 水平的时候，要转换坐标轴\n  if (layout === 'horizontal') {\n    chart.coordinate().transpose();\n  }\n\n  return { ...params, ext: { data: { min, max } } };\n}\n\n/**\n * meta 配置\n * @param params\n */\nexport function meta(params: Params<BulletOptions>): Params<BulletOptions> {\n  const { options, ext } = params;\n  const { xAxis, yAxis, targetField, rangeField, measureField, xField } = options;\n\n  const extData = ext.data;\n  return flow(\n    scale(\n      {\n        [xField]: xAxis,\n        [measureField]: yAxis,\n      },\n      // 额外的 meta\n      {\n        [measureField]: { min: extData?.min, max: extData?.max, sync: true },\n        [targetField]: {\n          sync: `${measureField}`,\n        },\n        [rangeField]: {\n          sync: `${measureField}`,\n        },\n      }\n    )\n  )(params);\n}\n\n/**\n * axis 配置\n * @param params\n */\nfunction axis(params: Params<BulletOptions>): Params<BulletOptions> {\n  const { chart, options } = params;\n  const { xAxis, yAxis, xField, measureField, rangeField, targetField } = options;\n\n  chart.axis(`${rangeField}`, false);\n  chart.axis(`${targetField}`, false);\n\n  // 为 false 则是不显示轴\n  if (xAxis === false) {\n    chart.axis(`${xField}`, false);\n  } else {\n    chart.axis(`${xField}`, xAxis);\n  }\n\n  if (yAxis === false) {\n    chart.axis(`${measureField}`, false);\n  } else {\n    chart.axis(`${measureField}`, yAxis);\n  }\n\n  return params;\n}\n\n/**\n * legend 配置\n * @param params\n */\nfunction legend(params: Params<BulletOptions>): Params<BulletOptions> {\n  const { chart, options } = params;\n  const { legend } = options;\n  chart.removeInteraction('legend-filter');\n  // @TODO 后续看是否内部自定义一个 legend\n  chart.legend(legend);\n\n  // 默认关闭掉所在 color 字段的 legend, 从而不影响自定义的legend\n  chart.legend('rKey', false);\n  chart.legend('mKey', false);\n  chart.legend('tKey', false);\n\n  return params;\n}\n\n/**\n * label 配置\n * @param params\n */\nfunction label(params: Params<BulletOptions>): Params<BulletOptions> {\n  const { chart, options } = params;\n  const { label, measureField, targetField, rangeField } = options;\n  const [rangeGeometry, measureGeometry, targetGeometry] = chart.geometries;\n\n  if (get(label, 'range')) {\n    rangeGeometry.label(`${rangeField}`, {\n      layout: [{ type: 'limit-in-plot' }],\n      ...transformLabel(label.range),\n    });\n  } else {\n    rangeGeometry.label(false);\n  }\n  if (get(label, 'measure')) {\n    measureGeometry.label(`${measureField}`, {\n      layout: [{ type: 'limit-in-plot' }],\n      ...transformLabel(label.measure),\n    });\n  } else {\n    measureGeometry.label(false);\n  }\n  if (get(label, 'target')) {\n    targetGeometry.label(`${targetField}`, {\n      layout: [{ type: 'limit-in-plot' }],\n      ...transformLabel(label.target),\n    });\n  } else {\n    targetGeometry.label(false);\n  }\n\n  return params;\n}\n\n/**\n * 子弹图适配器\n * @param chart\n * @param options\n */\nexport function adaptor(params: Params<BulletOptions>) {\n  // flow 的方式处理所有的配置到 G2 API\n  flow(geometry, meta, axis, legend, theme, label, tooltip, interaction, animation)(params);\n}\n"]},"metadata":{},"sourceType":"module"}