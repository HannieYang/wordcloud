{"ast":null,"code":"// 检测各边是否超出\nexport function getOutSides(x, y, width, height, limitBox) {\n  var hits = {\n    left: x < limitBox.x,\n    right: x + width > limitBox.x + limitBox.width,\n    top: y < limitBox.y,\n    bottom: y + height > limitBox.y + limitBox.height\n  };\n  return hits;\n}\nexport function getPointByPosition(x, y, offset, width, height, position) {\n  var px = x;\n  var py = y;\n\n  switch (position) {\n    case 'left':\n      // left center\n      px = x - width - offset;\n      py = y - height / 2;\n      break;\n\n    case 'right':\n      px = x + offset;\n      py = y - height / 2;\n      break;\n\n    case 'top':\n      px = x - width / 2;\n      py = y - height - offset;\n      break;\n\n    case 'bottom':\n      // bottom\n      px = x - width / 2;\n      py = y + offset;\n      break;\n\n    default:\n      // auto, 在 top-right\n      px = x + offset;\n      py = y - height - offset;\n      break;\n  }\n\n  return {\n    x: px,\n    y: py\n  };\n}\nexport function getAlignPoint(x, y, offset, width, height, position, limitBox) {\n  var point = getPointByPosition(x, y, offset, width, height, position);\n\n  if (limitBox) {\n    var outSides = getOutSides(point.x, point.y, width, height, limitBox);\n\n    if (position === 'auto') {\n      // 如果是 auto，默认 tooltip 在右上角，仅需要判定右侧和上测冲突即可\n      if (outSides.right) {\n        point.x = Math.max(0, x - width - offset);\n      }\n\n      if (outSides.top) {\n        point.y = Math.max(0, y - height - offset);\n      }\n    } else if (position === 'top' || position === 'bottom') {\n      if (outSides.left) {\n        // 左侧躲避\n        point.x = limitBox.x;\n      }\n\n      if (outSides.right) {\n        // 右侧躲避\n        point.x = limitBox.x + limitBox.width - width;\n      }\n\n      if (position === 'top' && outSides.top) {\n        // 如果上面对齐检测上面，不检测下面\n        point.y = y + offset;\n      }\n\n      if (position === 'bottom' && outSides.bottom) {\n        point.y = y - height - offset;\n      }\n    } else {\n      // 检测左右位置\n      if (outSides.top) {\n        point.y = limitBox.y;\n      }\n\n      if (outSides.bottom) {\n        point.y = limitBox.y + limitBox.height - height;\n      }\n\n      if (position === 'left' && outSides.left) {\n        point.x = x + offset;\n      }\n\n      if (position === 'right' && outSides.right) {\n        point.x = x - width - offset;\n      }\n    }\n  }\n\n  return point;\n}","map":{"version":3,"mappings":"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","names":["getOutSides","x","y","width","height","limitBox","hits","left","right","top","bottom","getPointByPosition","offset","position","px","py","getAlignPoint","point","outSides","Math","max"],"sourceRoot":"","sources":["../../src/util/align.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}