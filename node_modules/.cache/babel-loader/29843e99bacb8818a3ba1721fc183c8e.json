{"ast":null,"code":"import { __assign, __extends } from \"tslib\";\nimport { createDom, getOuterHeight, getOuterWidth, modifyCSS } from '@antv/dom-util';\nimport { isElement, isFunction, isNumber, isString } from '@antv/util';\nimport HtmlComponent from '../abstract/html-component';\nimport { clearDom } from '../util/util';\n\nvar HtmlAnnotation =\n/** @class */\nfunction (_super) {\n  __extends(HtmlAnnotation, _super);\n\n  function HtmlAnnotation() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  HtmlAnnotation.prototype.getDefaultCfg = function () {\n    var cfg = _super.prototype.getDefaultCfg.call(this);\n\n    return __assign(__assign({}, cfg), {\n      name: 'annotation',\n      type: 'html',\n      locationType: 'point',\n      x: 0,\n      y: 0,\n      containerTpl: \"<div class=\\\"g2-html-annotation\\\"></div>\",\n      alignX: 'left',\n      alignY: 'top',\n      html: '',\n      zIndex: 7\n    });\n  };\n\n  HtmlAnnotation.prototype.render = function () {\n    var container = this.getContainer();\n    var html = this.get('html');\n    clearDom(container);\n    var rst = isFunction(html) ? html(container) : html;\n\n    if (isElement(rst)) {\n      container.appendChild(rst);\n    } else if (isString(rst) || isNumber(rst)) {\n      var dom = createDom(\"\" + rst);\n\n      if (dom) {\n        container.appendChild(dom);\n      }\n    }\n\n    this.resetPosition();\n  };\n\n  HtmlAnnotation.prototype.resetPosition = function () {\n    var container = this.getContainer();\n\n    var _a = this.getLocation(),\n        x = _a.x,\n        y = _a.y;\n\n    var alignX = this.get('alignX');\n    var alignY = this.get('alignY');\n    var offsetX = this.get('offsetX');\n    var offsetY = this.get('offsetY');\n    var domWidth = getOuterWidth(container);\n    var domHeight = getOuterHeight(container);\n    var position = {\n      x: x,\n      y: y\n    };\n\n    if (alignX === 'middle') {\n      position.x -= Math.round(domWidth / 2);\n    } else if (alignX === 'right') {\n      position.x -= Math.round(domWidth);\n    }\n\n    if (alignY === 'middle') {\n      position.y -= Math.round(domHeight / 2);\n    } else if (alignY === 'bottom') {\n      position.y -= Math.round(domHeight);\n    }\n\n    if (offsetX) {\n      position.x += offsetX;\n    }\n\n    if (offsetY) {\n      position.y += offsetY;\n    }\n\n    modifyCSS(container, {\n      position: 'absolute',\n      left: position.x + \"px\",\n      top: position.y + \"px\",\n      zIndex: this.get('zIndex')\n    });\n  };\n\n  return HtmlAnnotation;\n}(HtmlComponent);\n\nexport default HtmlAnnotation;","map":{"version":3,"mappings":"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","names":["createDom","getOuterHeight","getOuterWidth","modifyCSS","isElement","isFunction","isNumber","isString","HtmlComponent","clearDom","__extends","HtmlAnnotation","cfg","_super","getDefaultCfg","call","name","type","locationType","x","y","containerTpl","alignX","alignY","html","zIndex","container","getContainer","get","rst","appendChild","dom","resetPosition","getLocation","offsetX","offsetY","domWidth","domHeight","position","Math","round","left","top"],"sourceRoot":"","sources":["../../src/annotation/html.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}