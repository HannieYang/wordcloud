{"ast":null,"code":"import { __assign, __extends, __spreadArrays } from \"tslib\";\nimport { clone, isFunction, mix, upperFirst } from '@antv/util';\nimport Theme from '../util/theme';\nimport { getValueByPercent } from '../util/util';\nimport LegendBase from './base';\nvar HANDLER_HEIGHT_RATIO = 1.4;\nvar HANDLER_TRIANGLE_RATIO = 0.4;\n\nvar ContinueLegend =\n/** @class */\nfunction (_super) {\n  __extends(ContinueLegend, _super);\n\n  function ContinueLegend() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  ContinueLegend.prototype.getDefaultCfg = function () {\n    var cfg = _super.prototype.getDefaultCfg.call(this);\n\n    return __assign(__assign({}, cfg), {\n      type: 'continue',\n      min: 0,\n      max: 100,\n      value: null,\n      colors: [],\n      track: {},\n      rail: {},\n      label: {},\n      handler: {},\n      slidable: true,\n      tip: null,\n      step: null,\n      maxWidth: null,\n      maxHeight: null,\n      defaultCfg: {\n        label: {\n          align: 'rail',\n          spacing: 5,\n          formatter: null,\n          style: {\n            fontSize: 12,\n            fill: Theme.textColor,\n            textBaseline: 'middle',\n            fontFamily: Theme.fontFamily\n          }\n        },\n        handler: {\n          size: 10,\n          style: {\n            fill: '#fff',\n            stroke: '#333'\n          }\n        },\n        track: {},\n        rail: {\n          type: 'color',\n          size: 20,\n          defaultLength: 100,\n          style: {\n            fill: '#DCDEE2'\n          }\n        },\n        title: {\n          spacing: 5,\n          style: {\n            fill: Theme.textColor,\n            fontSize: 12,\n            textAlign: 'start',\n            textBaseline: 'top'\n          }\n        }\n      }\n    });\n  };\n\n  ContinueLegend.prototype.isSlider = function () {\n    return true;\n  }; // 实现 IList 接口\n\n\n  ContinueLegend.prototype.getValue = function () {\n    return this.getCurrentValue();\n  };\n\n  ContinueLegend.prototype.getRange = function () {\n    return {\n      min: this.get('min'),\n      max: this.get('max')\n    };\n  }; // 改变 range\n\n\n  ContinueLegend.prototype.setRange = function (min, max) {\n    this.update({\n      min: min,\n      max: max\n    });\n  };\n\n  ContinueLegend.prototype.setValue = function (value) {\n    var originValue = this.getValue();\n    this.set('value', value);\n    var group = this.get('group');\n    this.resetTrackClip();\n\n    if (this.get('slidable')) {\n      this.resetHandlers(group);\n    }\n\n    this.delegateEmit('valuechanged', {\n      originValue: originValue,\n      value: value\n    });\n  };\n\n  ContinueLegend.prototype.initEvent = function () {\n    var group = this.get('group');\n    this.bindSliderEvent(group);\n    this.bindRailEvent(group);\n    this.bindTrackEvent(group);\n  };\n\n  ContinueLegend.prototype.drawLegendContent = function (group) {\n    this.drawRail(group);\n    this.drawLabels(group);\n    this.fixedElements(group); // 调整各个图形位置，适应宽高的限制\n\n    this.resetTrack(group);\n    this.resetTrackClip(group);\n\n    if (this.get('slidable')) {\n      this.resetHandlers(group);\n    }\n  };\n\n  ContinueLegend.prototype.bindSliderEvent = function (group) {\n    this.bindHandlersEvent(group);\n  };\n\n  ContinueLegend.prototype.bindHandlersEvent = function (group) {\n    var _this = this;\n\n    group.on('legend-handler-min:drag', function (ev) {\n      var minValue = _this.getValueByCanvasPoint(ev.x, ev.y);\n\n      var currentValue = _this.getCurrentValue();\n\n      var maxValue = currentValue[1];\n\n      if (maxValue < minValue) {\n        // 如果小于最小值，则调整最小值\n        maxValue = minValue;\n      }\n\n      _this.setValue([minValue, maxValue]);\n    });\n    group.on('legend-handler-max:drag', function (ev) {\n      var maxValue = _this.getValueByCanvasPoint(ev.x, ev.y);\n\n      var currentValue = _this.getCurrentValue();\n\n      var minValue = currentValue[0];\n\n      if (minValue > maxValue) {\n        // 如果小于最小值，则调整最小值\n        minValue = maxValue;\n      }\n\n      _this.setValue([minValue, maxValue]);\n    });\n  };\n\n  ContinueLegend.prototype.bindRailEvent = function (group) {};\n\n  ContinueLegend.prototype.bindTrackEvent = function (group) {\n    var _this = this;\n\n    var prePoint = null;\n    group.on('legend-track:dragstart', function (ev) {\n      prePoint = {\n        x: ev.x,\n        y: ev.y\n      };\n    });\n    group.on('legend-track:drag', function (ev) {\n      if (!prePoint) {\n        return;\n      }\n\n      var preValue = _this.getValueByCanvasPoint(prePoint.x, prePoint.y);\n\n      var curValue = _this.getValueByCanvasPoint(ev.x, ev.y);\n\n      var currentValue = _this.getCurrentValue();\n\n      var curDiff = currentValue[1] - currentValue[0];\n\n      var range = _this.getRange();\n\n      var dValue = curValue - preValue;\n\n      if (dValue < 0) {\n        // 减小, 同时未出边界\n        if (currentValue[0] + dValue > range.min) {\n          _this.setValue([currentValue[0] + dValue, currentValue[1] + dValue]);\n        } else {\n          _this.setValue([range.min, range.min + curDiff]);\n        } //  && ||\n\n      } else if (dValue > 0) {\n        if (dValue > 0 && currentValue[1] + dValue < range.max) {\n          _this.setValue([currentValue[0] + dValue, currentValue[1] + dValue]);\n        } else {\n          _this.setValue([range.max - curDiff, range.max]);\n        }\n      }\n\n      prePoint = {\n        x: ev.x,\n        y: ev.y\n      };\n    });\n    group.on('legend-track:dragend', function (ev) {\n      prePoint = null;\n    });\n  };\n\n  ContinueLegend.prototype.drawLabels = function (group) {\n    this.drawLabel('min', group);\n    this.drawLabel('max', group);\n  };\n\n  ContinueLegend.prototype.drawLabel = function (name, group) {\n    var labelCfg = this.get('label');\n    var style = labelCfg.style;\n    var labelAlign = labelCfg.align;\n    var labelFormatter = labelCfg.formatter;\n    var value = this.get(name);\n    var alignAttrs = this.getLabelAlignAttrs(name, labelAlign);\n    var localId = \"label-\" + name;\n    this.addShape(group, {\n      type: 'text',\n      id: this.getElementId(localId),\n      name: \"legend-label-\" + name,\n      attrs: __assign(__assign({\n        x: 0,\n        y: 0,\n        text: isFunction(labelFormatter) ? labelFormatter(value) : value\n      }, style), alignAttrs)\n    });\n  }; // 获取文本的对齐方式，为了自适应真实操碎了心\n\n\n  ContinueLegend.prototype.getLabelAlignAttrs = function (name, align) {\n    var isVertical = this.isVertical();\n    var textAlign = 'center';\n    var textBaseline = 'middle';\n\n    if (isVertical) {\n      // 垂直布局的所有的文本都左对齐\n      textAlign = 'start';\n\n      if (align !== 'rail') {\n        if (name === 'min') {\n          textBaseline = 'top';\n        } else {\n          textBaseline = 'bottom';\n        }\n      } else {\n        textBaseline = 'top';\n      }\n    } else {\n      if (align !== 'rail') {\n        textBaseline = 'top';\n\n        if (name === 'min') {\n          textAlign = 'start';\n        } else {\n          textAlign = 'end';\n        }\n      } else {\n        textAlign = 'start';\n        textBaseline = 'middle';\n      }\n    }\n\n    return {\n      textAlign: textAlign,\n      textBaseline: textBaseline\n    };\n  };\n\n  ContinueLegend.prototype.getRailPath = function (x, y, w, h) {\n    var railCfg = this.get('rail');\n    var size = railCfg.size,\n        defaultLength = railCfg.defaultLength,\n        type = railCfg.type;\n    var isVertical = this.isVertical();\n    var length = defaultLength;\n    var width = w;\n    var height = h;\n\n    if (!width) {\n      width = isVertical ? size : length;\n    }\n\n    if (!height) {\n      height = isVertical ? length : size;\n    }\n\n    var path = [];\n\n    if (type === 'color') {\n      path.push(['M', x, y]);\n      path.push(['L', x + width, y]);\n      path.push(['L', x + width, y + height]);\n      path.push(['L', x, y + height]);\n      path.push(['Z']);\n    } else {\n      path.push(['M', x + width, y]);\n      path.push(['L', x + width, y + height]);\n      path.push(['L', x, y + height]);\n      path.push(['Z']);\n    }\n\n    return path;\n  };\n\n  ContinueLegend.prototype.drawRail = function (group) {\n    var railCfg = this.get('rail');\n    var style = railCfg.style;\n    this.addShape(group, {\n      type: 'path',\n      id: this.getElementId('rail'),\n      name: 'legend-rail',\n      attrs: __assign({\n        path: this.getRailPath(0, 0)\n      }, style)\n    });\n  }; // 将传入的颜色转换成渐变色\n\n\n  ContinueLegend.prototype.getTrackColor = function (colors) {\n    var count = colors.length;\n\n    if (!count) {\n      return null;\n    }\n\n    if (count === 1) {\n      return colors[0];\n    }\n\n    var color; // 最终形态 l(0) 0:colors[0] 0.5:colors[1] 1:colors[2];\n\n    if (this.isVertical()) {\n      // 根据方向设置渐变方向\n      color = 'l(90)';\n    } else {\n      color = 'l(0)';\n    }\n\n    for (var i = 0; i < count; i++) {\n      var percent = i / (count - 1);\n      color += \" \" + percent + \":\" + colors[i];\n    }\n\n    return color;\n  };\n\n  ContinueLegend.prototype.getTrackPath = function (group) {\n    var railShape = this.getRailShape(group);\n    var path = railShape.attr('path');\n    return clone(path);\n  };\n\n  ContinueLegend.prototype.getClipTrackAttrs = function (group) {\n    var value = this.getCurrentValue();\n    var min = value[0],\n        max = value[1];\n    var railBBox = this.getRailBBox(group);\n    var startPoint = this.getPointByValue(min, group);\n    var endPoint = this.getPointByValue(max, group);\n    var isVertical = this.isVertical();\n    var x;\n    var y;\n    var width;\n    var height;\n\n    if (isVertical) {\n      x = railBBox.minX;\n      y = startPoint.y;\n      width = railBBox.width;\n      height = endPoint.y - startPoint.y;\n    } else {\n      x = startPoint.x;\n      y = railBBox.minY;\n      width = endPoint.x - startPoint.x;\n      height = railBBox.height;\n    }\n\n    return {\n      x: x,\n      y: y,\n      width: width,\n      height: height\n    };\n  }; // 获取 track 的属性，由 path 和 颜色构成\n\n\n  ContinueLegend.prototype.getTrackAttrs = function (group) {\n    var trackCfg = this.get('track');\n    var colors = this.get('colors');\n    var path = this.getTrackPath(group);\n    return mix({\n      path: path,\n      fill: this.getTrackColor(colors)\n    }, trackCfg.style);\n  };\n\n  ContinueLegend.prototype.resetTrackClip = function (group) {\n    var container = group || this.get('group');\n    var trackId = this.getElementId('track');\n    var trackShape = container.findById(trackId);\n    var clipShape = trackShape.getClip();\n    var attrs = this.getClipTrackAttrs(group);\n\n    if (!clipShape) {\n      trackShape.setClip({\n        type: 'rect',\n        attrs: attrs\n      });\n    } else {\n      clipShape.attr(attrs);\n    }\n  };\n\n  ContinueLegend.prototype.resetTrack = function (group) {\n    var trackId = this.getElementId('track');\n    var trackShape = group.findById(trackId);\n    var trackAttrs = this.getTrackAttrs(group);\n\n    if (trackShape) {\n      trackShape.attr(trackAttrs);\n    } else {\n      this.addShape(group, {\n        type: 'path',\n        id: trackId,\n        draggable: this.get('slidable'),\n        name: 'legend-track',\n        attrs: trackAttrs\n      });\n    }\n  };\n\n  ContinueLegend.prototype.getPointByValue = function (value, group) {\n    var _a = this.getRange(),\n        min = _a.min,\n        max = _a.max;\n\n    var percent = (value - min) / (max - min);\n    var bbox = this.getRailBBox(group);\n    var isVertcal = this.isVertical();\n    var point = {\n      x: 0,\n      y: 0\n    };\n\n    if (isVertcal) {\n      point.x = bbox.minX + bbox.width / 2;\n      point.y = getValueByPercent(bbox.minY, bbox.maxY, percent);\n    } else {\n      point.x = getValueByPercent(bbox.minX, bbox.maxX, percent);\n      point.y = bbox.minY + bbox.height / 2;\n    }\n\n    return point;\n  };\n\n  ContinueLegend.prototype.getRailShape = function (group) {\n    var container = group || this.get('group');\n    return container.findById(this.getElementId('rail'));\n  }; // 获取滑轨的宽高信息\n\n\n  ContinueLegend.prototype.getRailBBox = function (group) {\n    var railShape = this.getRailShape(group);\n    var bbox = railShape.getBBox();\n    return bbox;\n  };\n\n  ContinueLegend.prototype.getRailCanvasBBox = function () {\n    var container = this.get('group');\n    var railShape = container.findById(this.getElementId('rail'));\n    var bbox = railShape.getCanvasBBox();\n    return bbox;\n  }; // 是否垂直\n\n\n  ContinueLegend.prototype.isVertical = function () {\n    return this.get('layout') === 'vertical';\n  }; // 用于交互时\n\n\n  ContinueLegend.prototype.getValueByCanvasPoint = function (x, y) {\n    var _a = this.getRange(),\n        min = _a.min,\n        max = _a.max;\n\n    var bbox = this.getRailCanvasBBox(); // 因为 x, y 是画布坐标\n\n    var isVertcal = this.isVertical();\n    var step = this.get('step');\n    var percent;\n\n    if (isVertcal) {\n      // 垂直时计算 y\n      percent = (y - bbox.minY) / bbox.height;\n    } else {\n      // 水平时计算 x\n      percent = (x - bbox.minX) / bbox.width;\n    }\n\n    var value = getValueByPercent(min, max, percent);\n\n    if (step) {\n      var count = Math.round((value - min) / step);\n      value = min + count * step; // 移动到最近的\n    }\n\n    if (value > max) {\n      value = max;\n    }\n\n    if (value < min) {\n      value = min;\n    }\n\n    return value;\n  }; // 当前选中的范围\n\n\n  ContinueLegend.prototype.getCurrentValue = function () {\n    var value = this.get('value');\n\n    if (!value) {\n      var values = this.get('values');\n\n      if (!values) {\n        return [this.get('min'), this.get('max')];\n      } // 如果没有定义，取最大范围  最小值 为 values 中的最小值， 如果最小值 超过了 定义的最大值 则 做限制  最大值 反之\n\n\n      return [Math.max(Math.min.apply(Math, __spreadArrays(values, [this.get('max')])), this.get('min')), Math.min(Math.max.apply(Math, __spreadArrays(values, [this.get('min')])), this.get('max'))];\n    }\n\n    return value;\n  }; // 重置滑块 handler\n\n\n  ContinueLegend.prototype.resetHandlers = function (group) {\n    var currentValue = this.getCurrentValue();\n    var min = currentValue[0],\n        max = currentValue[1];\n    this.resetHandler(group, 'min', min);\n    this.resetHandler(group, 'max', max);\n  }; // 获取滑块的 path\n\n\n  ContinueLegend.prototype.getHandlerPath = function (handlerCfg, point) {\n    var isVertical = this.isVertical();\n    var path = [];\n    var width = handlerCfg.size;\n    var x = point.x,\n        y = point.y;\n    var height = width * HANDLER_HEIGHT_RATIO;\n    var halfWidth = width / 2;\n    var oneSixthWidth = width / 6;\n\n    if (isVertical) {\n      /**\n       * 竖直情况下的滑块 handler，左侧顶点是 x,y\n       *  /----|\n       *    -- |\n       *    -- |\n       *  \\----|\n       */\n      var triangleX = x + height * HANDLER_TRIANGLE_RATIO;\n      path.push(['M', x, y]);\n      path.push(['L', triangleX, y + halfWidth]);\n      path.push(['L', x + height, y + halfWidth]);\n      path.push(['L', x + height, y - halfWidth]);\n      path.push(['L', triangleX, y - halfWidth]);\n      path.push(['Z']); // 绘制两条横线\n\n      path.push(['M', triangleX, y + oneSixthWidth]);\n      path.push(['L', x + height - 2, y + oneSixthWidth]);\n      path.push(['M', triangleX, y - oneSixthWidth]);\n      path.push(['L', x + height - 2, y - oneSixthWidth]);\n    } else {\n      /**\n       * 水平情况下的滑块，上面顶点处是 x,y\n       *  /   \\\n       * | | | |\n       * | | | |\n       *  -----\n       */\n      var triangleY = y + height * HANDLER_TRIANGLE_RATIO;\n      path.push(['M', x, y]);\n      path.push(['L', x - halfWidth, triangleY]);\n      path.push(['L', x - halfWidth, y + height]);\n      path.push(['L', x + halfWidth, y + height]);\n      path.push(['L', x + halfWidth, triangleY]);\n      path.push(['Z']); // 绘制两条竖线\n\n      path.push(['M', x - oneSixthWidth, triangleY]);\n      path.push(['L', x - oneSixthWidth, y + height - 2]);\n      path.push(['M', x + oneSixthWidth, triangleY]);\n      path.push(['L', x + oneSixthWidth, y + height - 2]);\n    }\n\n    return path;\n  }; // 调整 handler 的位置，如果未存在则绘制\n\n\n  ContinueLegend.prototype.resetHandler = function (group, name, value) {\n    var point = this.getPointByValue(value, group);\n    var handlerCfg = this.get('handler');\n    var path = this.getHandlerPath(handlerCfg, point);\n    var id = this.getElementId(\"handler-\" + name);\n    var handlerShape = group.findById(id);\n    var isVertical = this.isVertical();\n\n    if (handlerShape) {\n      handlerShape.attr('path', path);\n    } else {\n      this.addShape(group, {\n        type: 'path',\n        name: \"legend-handler-\" + name,\n        draggable: true,\n        id: id,\n        attrs: __assign(__assign({\n          path: path\n        }, handlerCfg.style), {\n          cursor: isVertical ? 'ns-resize' : 'ew-resize'\n        })\n      });\n    }\n  }; // 当设置了 maxWidth, maxHeight 时调整 rail 的宽度，\n  // 文本的位置\n\n\n  ContinueLegend.prototype.fixedElements = function (group) {\n    var railShape = group.findById(this.getElementId('rail'));\n    var minLabel = group.findById(this.getElementId('label-min'));\n    var maxLabel = group.findById(this.getElementId('label-max'));\n    var startPoint = this.getDrawPoint();\n\n    if (this.isVertical()) {\n      // 横向布局\n      this.fixedVertail(minLabel, maxLabel, railShape, startPoint);\n    } else {\n      // 水平布局\n      this.fixedHorizontal(minLabel, maxLabel, railShape, startPoint);\n    }\n  };\n\n  ContinueLegend.prototype.fitRailLength = function (minLabelBBox, maxLabelBBox, railBBox, railShape) {\n    var isVertical = this.isVertical();\n    var lengthField = isVertical ? 'height' : 'width';\n    var labelCfg = this.get('label');\n    var labelAlign = labelCfg.align;\n    var spacing = labelCfg.spacing;\n    var maxLength = this.get(\"max\" + upperFirst(lengthField)); // get('maxWidth')\n\n    if (maxLength) {\n      var elementsLength = labelAlign === 'rail' ? railBBox[lengthField] + minLabelBBox[lengthField] + maxLabelBBox[lengthField] + spacing * 2 : railBBox[lengthField];\n      var diff = elementsLength - maxLength;\n\n      if (diff > 0) {\n        // 大于限制的长度\n        this.changeRailLength(railShape, lengthField, railBBox[lengthField] - diff);\n      }\n    }\n  };\n\n  ContinueLegend.prototype.changeRailLength = function (railShape, lengthField, length) {\n    var bbox = railShape.getBBox();\n    var path;\n\n    if (lengthField === 'height') {\n      path = this.getRailPath(bbox.x, bbox.y, bbox.width, length);\n    } else {\n      path = this.getRailPath(bbox.x, bbox.y, length, bbox.height);\n    }\n\n    railShape.attr('path', path);\n  };\n\n  ContinueLegend.prototype.changeRailPosition = function (railShape, x, y) {\n    var bbox = railShape.getBBox();\n    var path = this.getRailPath(x, y, bbox.width, bbox.height);\n    railShape.attr('path', path);\n  };\n\n  ContinueLegend.prototype.fixedHorizontal = function (minLabel, maxLabel, railShape, startPoint) {\n    var labelCfg = this.get('label');\n    var labelAlign = labelCfg.align;\n    var spacing = labelCfg.spacing;\n    var railBBox = railShape.getBBox();\n    var minLabelBBox = minLabel.getBBox();\n    var maxLabelBBox = maxLabel.getBBox();\n    var railHeight = railBBox.height; // 取 rail 的高度，作为高度\n\n    this.fitRailLength(minLabelBBox, maxLabelBBox, railBBox, railShape);\n    railBBox = railShape.getBBox();\n\n    if (labelAlign === 'rail') {\n      // 沿着 rail 方向\n      minLabel.attr({\n        x: startPoint.x,\n        y: startPoint.y + railHeight / 2\n      });\n      this.changeRailPosition(railShape, startPoint.x + minLabelBBox.width + spacing, startPoint.y);\n      maxLabel.attr({\n        x: startPoint.x + minLabelBBox.width + railBBox.width + spacing * 2,\n        y: startPoint.y + railHeight / 2\n      });\n    } else if (labelAlign === 'top') {\n      minLabel.attr({\n        x: startPoint.x,\n        y: startPoint.y\n      });\n      maxLabel.attr({\n        x: startPoint.x + railBBox.width,\n        y: startPoint.y\n      });\n      this.changeRailPosition(railShape, startPoint.x, startPoint.y + minLabelBBox.height + spacing);\n    } else {\n      this.changeRailPosition(railShape, startPoint.x, startPoint.y);\n      minLabel.attr({\n        x: startPoint.x,\n        y: startPoint.y + railBBox.height + spacing\n      });\n      maxLabel.attr({\n        x: startPoint.x + railBBox.width,\n        y: startPoint.y + railBBox.height + spacing\n      });\n    }\n  };\n\n  ContinueLegend.prototype.fixedVertail = function (minLabel, maxLabel, railShape, startPoint) {\n    var labelCfg = this.get('label');\n    var labelAlign = labelCfg.align;\n    var spacing = labelCfg.spacing;\n    var railBBox = railShape.getBBox();\n    var minLabelBBox = minLabel.getBBox();\n    var maxLabelBBox = maxLabel.getBBox();\n    this.fitRailLength(minLabelBBox, maxLabelBBox, railBBox, railShape);\n    railBBox = railShape.getBBox();\n\n    if (labelAlign === 'rail') {\n      // 沿着 rail 方向\n      minLabel.attr({\n        x: startPoint.x,\n        y: startPoint.y\n      });\n      this.changeRailPosition(railShape, startPoint.x, startPoint.y + minLabelBBox.height + spacing);\n      maxLabel.attr({\n        x: startPoint.x,\n        y: startPoint.y + minLabelBBox.height + railBBox.height + spacing * 2\n      });\n    } else if (labelAlign === 'right') {\n      minLabel.attr({\n        x: startPoint.x + railBBox.width + spacing,\n        y: startPoint.y\n      });\n      this.changeRailPosition(railShape, startPoint.x, startPoint.y);\n      maxLabel.attr({\n        x: startPoint.x + railBBox.width + spacing,\n        y: startPoint.y + railBBox.height\n      });\n    } else {\n      // left\n      var maxLabelWidth = Math.max(minLabelBBox.width, maxLabelBBox.width);\n      minLabel.attr({\n        x: startPoint.x,\n        y: startPoint.y\n      });\n      this.changeRailPosition(railShape, startPoint.x + maxLabelWidth + spacing, startPoint.y);\n      maxLabel.attr({\n        x: startPoint.x,\n        y: startPoint.y + railBBox.height\n      });\n    }\n  };\n\n  return ContinueLegend;\n}(LegendBase);\n\nexport default ContinueLegend;","map":{"version":3,"mappings":"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","names":["clone","isFunction","mix","upperFirst","Theme","getValueByPercent","LegendBase","HANDLER_HEIGHT_RATIO","HANDLER_TRIANGLE_RATIO","__extends","ContinueLegend","cfg","_super","getDefaultCfg","call","type","min","max","value","colors","track","rail","label","handler","slidable","tip","step","maxWidth","maxHeight","defaultCfg","align","spacing","formatter","style","fontSize","fill","textColor","textBaseline","fontFamily","size","stroke","defaultLength","title","textAlign","getCurrentValue","get","update","originValue","getValue","set","group","resetTrackClip","resetHandlers","delegateEmit","bindSliderEvent","bindRailEvent","bindTrackEvent","drawRail","drawLabels","fixedElements","resetTrack","bindHandlersEvent","on","ev","minValue","_this","getValueByCanvasPoint","x","y","currentValue","maxValue","setValue","prePoint","preValue","curValue","curDiff","range","getRange","dValue","drawLabel","name","labelCfg","labelAlign","labelFormatter","alignAttrs","getLabelAlignAttrs","localId","addShape","id","getElementId","attrs","text","isVertical","w","h","railCfg","length","width","height","path","push","getRailPath","count","color","i","percent","railShape","getRailShape","attr","railBBox","getRailBBox","startPoint","getPointByValue","endPoint","minX","minY","trackCfg","getTrackPath","getTrackColor","container","trackId","trackShape","findById","clipShape","getClip","getClipTrackAttrs","setClip","trackAttrs","getTrackAttrs","draggable","bbox","isVertcal","point","maxY","maxX","getBBox","getCanvasBBox","getRailCanvasBBox","Math","round","values","apply","__spreadArrays","resetHandler","handlerCfg","halfWidth","oneSixthWidth","triangleX","triangleY","getHandlerPath","handlerShape","cursor","minLabel","maxLabel","getDrawPoint","fixedVertail","fixedHorizontal","minLabelBBox","maxLabelBBox","lengthField","maxLength","elementsLength","diff","changeRailLength","railHeight","fitRailLength","changeRailPosition","maxLabelWidth"],"sourceRoot":"","sources":["../../src/legend/continuous.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}