{"ast":null,"code":"import { __assign, __rest } from \"tslib\";\nimport { tooltip, interaction, animation, theme, scale, annotation, legend } from '../../adaptor/common';\nimport { area, point, line } from '../../adaptor/geometries';\nimport { findGeometry, flow, transformLabel, deepAssign } from '../../utils';\n/**\n * geometry 配置处理\n * @param params\n */\n\nfunction geometry(params) {\n  var chart = params.chart,\n      options = params.options;\n  var data = options.data,\n      lineStyle = options.lineStyle,\n      color = options.color,\n      pointOptions = options.point,\n      areaOptions = options.area;\n  chart.data(data); // 雷达图 主 geometry\n\n  var primary = deepAssign({}, params, {\n    options: {\n      line: {\n        style: lineStyle,\n        color: color\n      },\n      point: pointOptions ? __assign({\n        color: color\n      }, pointOptions) : pointOptions,\n      area: areaOptions ? __assign({\n        color: color\n      }, areaOptions) : areaOptions,\n      // label 不传递给各个 geometry adaptor，由 label adaptor 处理\n      label: undefined\n    }\n  }); // 副 Geometry\n\n  var second = deepAssign({}, primary, {\n    options: {\n      tooltip: false\n    }\n  }); // 优先使用 point.state, 其次取主元素的 state 状态样式配置\n\n  var pointState = (pointOptions === null || pointOptions === void 0 ? void 0 : pointOptions.state) || options.state;\n  var pointParams = deepAssign({}, primary, {\n    options: {\n      tooltip: false,\n      state: pointState\n    }\n  });\n  line(primary);\n  point(pointParams);\n  area(second);\n  return params;\n}\n/**\n * meta 配置\n * @param params\n */\n\n\nfunction meta(params) {\n  var _a;\n\n  var options = params.options;\n  var xAxis = options.xAxis,\n      yAxis = options.yAxis,\n      xField = options.xField,\n      yField = options.yField;\n  return flow(scale((_a = {}, _a[xField] = xAxis, _a[yField] = yAxis, _a)))(params);\n}\n/**\n * coord 配置\n * @param params\n */\n\n\nfunction coord(params) {\n  var chart = params.chart,\n      options = params.options;\n  var radius = options.radius,\n      startAngle = options.startAngle,\n      endAngle = options.endAngle;\n  chart.coordinate('polar', {\n    radius: radius,\n    startAngle: startAngle,\n    endAngle: endAngle\n  });\n  return params;\n}\n/**\n * axis 配置\n * @param params\n */\n\n\nfunction axis(params) {\n  var chart = params.chart,\n      options = params.options;\n  var xField = options.xField,\n      xAxis = options.xAxis,\n      yField = options.yField,\n      yAxis = options.yAxis;\n  chart.axis(xField, xAxis);\n  chart.axis(yField, yAxis);\n  return params;\n}\n/**\n * label 配置\n * @param params\n */\n\n\nfunction label(params) {\n  var chart = params.chart,\n      options = params.options;\n  var label = options.label,\n      yField = options.yField;\n  var geometry = findGeometry(chart, 'line');\n\n  if (!label) {\n    geometry.label(false);\n  } else {\n    var callback = label.callback,\n        cfg = __rest(label, [\"callback\"]);\n\n    geometry.label({\n      fields: [yField],\n      callback: callback,\n      cfg: transformLabel(cfg)\n    });\n  }\n\n  return params;\n}\n/**\n * 雷达图适配器\n * @param chart\n * @param options\n */\n\n\nexport function adaptor(params) {\n  // flow 的方式处理所有的配置到 G2 API\n  return flow(geometry, meta, theme, coord, axis, legend, tooltip, label, interaction, animation, annotation())(params);\n}","map":{"version":3,"mappings":"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","names":["tooltip","interaction","animation","theme","scale","annotation","legend","area","point","line","findGeometry","flow","transformLabel","deepAssign","geometry","params","options","lineStyle","color","pointOptions","areaOptions","chart","data","primary","style","__assign","label","undefined","second","pointState","state","pointParams","meta","yAxis","xField","yField","_a","xAxis","coord","startAngle","endAngle","coordinate","radius","axis","cfg","fields","callback","adaptor"],"sourceRoot":"","sources":["../../../src/plots/radar/adaptor.ts"],"sourcesContent":["import { Params } from '../../core/adaptor';\nimport { tooltip, interaction, animation, theme, scale, annotation, legend } from '../../adaptor/common';\nimport { area, point, line } from '../../adaptor/geometries';\nimport { findGeometry, flow, transformLabel, deepAssign } from '../../utils';\nimport { RadarOptions } from './types';\n\n/**\n * geometry 配置处理\n * @param params\n */\nfunction geometry(params: Params<RadarOptions>): Params<RadarOptions> {\n  const { chart, options } = params;\n  const { data, lineStyle, color, point: pointOptions, area: areaOptions } = options;\n\n  chart.data(data);\n\n  // 雷达图 主 geometry\n  const primary = deepAssign({}, params, {\n    options: {\n      line: {\n        style: lineStyle,\n        color,\n      },\n      point: pointOptions\n        ? {\n            color,\n            ...pointOptions,\n          }\n        : pointOptions,\n      area: areaOptions\n        ? {\n            color,\n            ...areaOptions,\n          }\n        : areaOptions,\n      // label 不传递给各个 geometry adaptor，由 label adaptor 处理\n      label: undefined,\n    },\n  });\n  // 副 Geometry\n  const second = deepAssign({}, primary, {\n    options: {\n      tooltip: false,\n    },\n  });\n  // 优先使用 point.state, 其次取主元素的 state 状态样式配置\n  const pointState = pointOptions?.state || options.state;\n  const pointParams = deepAssign({}, primary, { options: { tooltip: false, state: pointState } });\n\n  line(primary);\n  point(pointParams);\n  area(second);\n\n  return params;\n}\n\n/**\n * meta 配置\n * @param params\n */\nfunction meta(params: Params<RadarOptions>): Params<RadarOptions> {\n  const { options } = params;\n  const { xAxis, yAxis, xField, yField } = options;\n\n  return flow(\n    scale({\n      [xField]: xAxis,\n      [yField]: yAxis,\n    })\n  )(params);\n}\n\n/**\n * coord 配置\n * @param params\n */\nfunction coord(params: Params<RadarOptions>): Params<RadarOptions> {\n  const { chart, options } = params;\n  const { radius, startAngle, endAngle } = options;\n\n  chart.coordinate('polar', {\n    radius,\n    startAngle,\n    endAngle,\n  });\n  return params;\n}\n\n/**\n * axis 配置\n * @param params\n */\nfunction axis(params: Params<RadarOptions>): Params<RadarOptions> {\n  const { chart, options } = params;\n  const { xField, xAxis, yField, yAxis } = options;\n\n  chart.axis(xField, xAxis);\n  chart.axis(yField, yAxis);\n\n  return params;\n}\n\n/**\n * label 配置\n * @param params\n */\nfunction label(params: Params<RadarOptions>): Params<RadarOptions> {\n  const { chart, options } = params;\n  const { label, yField } = options;\n\n  const geometry = findGeometry(chart, 'line');\n\n  if (!label) {\n    geometry.label(false);\n  } else {\n    const { callback, ...cfg } = label;\n    geometry.label({\n      fields: [yField],\n      callback,\n      cfg: transformLabel(cfg),\n    });\n  }\n\n  return params;\n}\n\n/**\n * 雷达图适配器\n * @param chart\n * @param options\n */\nexport function adaptor(params: Params<RadarOptions>) {\n  // flow 的方式处理所有的配置到 G2 API\n  return flow(geometry, meta, theme, coord, axis, legend, tooltip, label, interaction, animation, annotation())(params);\n}\n"]},"metadata":{},"sourceType":"module"}