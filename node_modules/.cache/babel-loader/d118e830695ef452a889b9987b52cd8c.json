{"ast":null,"code":"import { __assign, __extends } from \"tslib\";\nimport colorUtil from '@antv/color-util';\nimport { createDom, modifyCSS } from '@antv/dom-util';\nimport { each, hasKey, isElement, substitute } from '@antv/util';\nimport HtmlComponent from '../abstract/html-component';\nimport { clearDom, regionToBBox, toPx } from '../util/util';\nimport * as CssConst from './css-const';\nimport TooltipTheme from './html-theme';\nimport { getAlignPoint } from '../util/align';\n\nfunction hasOneKey(obj, keys) {\n  var result = false;\n  each(keys, function (key) {\n    if (hasKey(obj, key)) {\n      result = true;\n      return false;\n    }\n  });\n  return result;\n}\n\nvar Tooltip =\n/** @class */\nfunction (_super) {\n  __extends(Tooltip, _super);\n\n  function Tooltip() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  Tooltip.prototype.getDefaultCfg = function () {\n    var cfg = _super.prototype.getDefaultCfg.call(this);\n\n    return __assign(__assign({}, cfg), {\n      name: 'tooltip',\n      type: 'html',\n      x: 0,\n      y: 0,\n      items: [],\n      customContent: null,\n      containerTpl: \"<div class=\\\"\" + CssConst.CONTAINER_CLASS + \"\\\"><div class=\\\"\" + CssConst.TITLE_CLASS + \"\\\"></div><ul class=\\\"\" + CssConst.LIST_CLASS + \"\\\"></ul></div>\",\n      itemTpl: \"<li class=\\\"\" + CssConst.LIST_ITEM_CLASS + \"\\\" data-index={index}>\\n          <span class=\\\"\" + CssConst.MARKER_CLASS + \"\\\" style=\\\"background:{color}\\\"></span>\\n          <span class=\\\"\" + CssConst.NAME_CLASS + \"\\\">{name}</span>:\\n          <span class=\\\"\" + CssConst.VALUE_CLASS + \"\\\">{value}</span>\\n        </li>\",\n      xCrosshairTpl: \"<div class=\\\"\" + CssConst.CROSSHAIR_X + \"\\\"></div>\",\n      yCrosshairTpl: \"<div class=\\\"\" + CssConst.CROSSHAIR_Y + \"\\\"></div>\",\n      title: null,\n      showTitle: true,\n\n      /**\n       * tooltip 限制的区域\n       * @type {Region}\n       */\n      region: null,\n      // crosshair 的限制区域\n      crosshairsRegion: null,\n      containerClassName: CssConst.CONTAINER_CLASS,\n      // x, y, xy\n      crosshairs: null,\n      offset: 10,\n      position: 'right',\n      domStyles: null,\n      defaultStyles: TooltipTheme\n    });\n  }; // tooltip 渲染时，渲染 title，items 和 corosshairs\n\n\n  Tooltip.prototype.render = function () {\n    if (this.get('customContent')) {\n      this.renderCustomContent();\n    } else {\n      this.resetTitle();\n      this.renderItems();\n    } // 绘制完成后，再定位\n\n\n    this.resetPosition();\n  }; // 复写清空函数，因为有模板的存在，所以默认的写法不合适\n\n\n  Tooltip.prototype.clear = function () {\n    // 由于 crosshair 没有在 container 内，所以需要单独清理\n    this.clearCrosshairs();\n    this.setTitle(''); // 清空标题\n\n    this.clearItemDoms();\n  };\n\n  Tooltip.prototype.show = function () {\n    var container = this.getContainer();\n\n    if (!container || this.destroyed) {\n      // 防止容器不存在或者被销毁时报错\n      return;\n    }\n\n    this.set('visible', true);\n    modifyCSS(container, {\n      visibility: 'visible'\n    });\n    this.setCrossHairsVisible(true);\n  };\n\n  Tooltip.prototype.hide = function () {\n    var container = this.getContainer(); // relative: https://github.com/antvis/g2/issues/1221\n\n    if (!container || this.destroyed) {\n      return;\n    }\n\n    this.set('visible', false);\n    modifyCSS(container, {\n      visibility: 'hidden'\n    });\n    this.setCrossHairsVisible(false);\n  }; // 实现 IPointLocation 的接口\n\n\n  Tooltip.prototype.getLocation = function () {\n    return {\n      x: this.get('x'),\n      y: this.get('y')\n    };\n  }; // 实现 IPointLocation 的接口\n\n\n  Tooltip.prototype.setLocation = function (point) {\n    this.set('x', point.x);\n    this.set('y', point.y);\n    this.resetPosition();\n  };\n\n  Tooltip.prototype.setCrossHairsVisible = function (visible) {\n    var display = visible ? '' : 'none';\n    var xCrosshairDom = this.get('xCrosshairDom');\n    var yCrosshairDom = this.get('yCrosshairDom');\n    xCrosshairDom && modifyCSS(xCrosshairDom, {\n      display: display\n    });\n    yCrosshairDom && modifyCSS(yCrosshairDom, {\n      display: display\n    });\n  }; // 如有 customContent 则根据 customContent 设置 container\n\n\n  Tooltip.prototype.initContainer = function () {\n    _super.prototype.initContainer.call(this);\n\n    if (this.get('customContent')) {\n      if (this.get('container')) {\n        this.get('container').remove();\n      }\n\n      var container = this.getHtmlContentNode();\n      this.get('parent').appendChild(container);\n      this.set('container', container);\n      this.resetStyles();\n      this.applyStyles();\n    }\n  }; // 更新属性的同时，可能会引起 DOM 的变化，这里对可能引起 DOM 变化的场景做了处理\n\n\n  Tooltip.prototype.updateInner = function (cfg) {\n    if (this.get('customContent')) {\n      this.renderCustomContent();\n    } else {\n      // 更新标题\n      if (hasOneKey(cfg, ['title', 'showTitle'])) {\n        this.resetTitle();\n      } // 更新内容\n\n\n      if (hasKey(cfg, 'items')) {\n        this.renderItems();\n      }\n    }\n\n    _super.prototype.updateInner.call(this, cfg);\n  };\n\n  Tooltip.prototype.initDom = function () {\n    this.cacheDoms();\n  }; // 清理 DOM\n\n\n  Tooltip.prototype.removeDom = function () {\n    _super.prototype.removeDom.call(this);\n\n    this.clearCrosshairs();\n  }; // 调整位置\n\n\n  Tooltip.prototype.resetPosition = function () {\n    var x = this.get('x');\n    var y = this.get('y');\n    var offset = this.get('offset');\n\n    var _a = this.getOffset(),\n        offsetX = _a.offsetX,\n        offsetY = _a.offsetY;\n\n    var position = this.get('position');\n    var region = this.get('region');\n    var container = this.getContainer();\n    var bbox = this.getBBox();\n    var width = bbox.width,\n        height = bbox.height;\n    var limitBox;\n\n    if (region) {\n      // 不限制位置\n      limitBox = regionToBBox(region);\n    }\n\n    var point = getAlignPoint(x, y, offset, width, height, position, limitBox);\n    modifyCSS(container, {\n      left: toPx(point.x + offsetX),\n      top: toPx(point.y + offsetY)\n    });\n    this.resetCrosshairs();\n  }; // 根据 customContent 渲染\n\n\n  Tooltip.prototype.renderCustomContent = function () {\n    var node = this.getHtmlContentNode();\n    var parent = this.get('parent');\n    var curContainer = this.get('container');\n\n    if (curContainer && curContainer.parentNode === parent) {\n      parent.replaceChild(node, curContainer);\n    } else {\n      parent.appendChild(node);\n    }\n\n    this.set('container', node);\n    this.resetStyles();\n    this.applyStyles();\n  };\n\n  Tooltip.prototype.getHtmlContentNode = function () {\n    var node;\n    var customContent = this.get('customContent');\n\n    if (customContent) {\n      var elem = customContent(this.get('title'), this.get('items'));\n\n      if (isElement(elem)) {\n        node = elem;\n      } else {\n        node = createDom(elem);\n      }\n    }\n\n    return node;\n  }; // 缓存模板设置的各种 DOM\n\n\n  Tooltip.prototype.cacheDoms = function () {\n    var container = this.getContainer();\n    var titleDom = container.getElementsByClassName(CssConst.TITLE_CLASS)[0];\n    var listDom = container.getElementsByClassName(CssConst.LIST_CLASS)[0];\n    this.set('titleDom', titleDom);\n    this.set('listDom', listDom);\n  }; // 重置 title\n\n\n  Tooltip.prototype.resetTitle = function () {\n    var title = this.get('title');\n    var showTitle = this.get('showTitle');\n\n    if (showTitle && title) {\n      this.setTitle(title);\n    } else {\n      this.setTitle('');\n    }\n  }; // 设置 title 文本\n\n\n  Tooltip.prototype.setTitle = function (text) {\n    var titleDom = this.get('titleDom');\n\n    if (titleDom) {\n      titleDom.innerText = text;\n    }\n  }; // 终止 crosshair\n\n\n  Tooltip.prototype.resetCrosshairs = function () {\n    var crosshairsRegion = this.get('crosshairsRegion');\n    var crosshairs = this.get('crosshairs');\n\n    if (!crosshairsRegion || !crosshairs) {\n      // 不显示 crosshair，都移除，没有设定 region 也都移除掉\n      this.clearCrosshairs();\n    } else {\n      var crosshairBox = regionToBBox(crosshairsRegion);\n      var xCrosshairDom = this.get('xCrosshairDom');\n      var yCrosshairDom = this.get('yCrosshairDom');\n\n      if (crosshairs === 'x') {\n        this.resetCrosshair('x', crosshairBox); // 仅显示 x 的 crosshair，y 移除\n\n        if (yCrosshairDom) {\n          yCrosshairDom.remove();\n          this.set('yCrosshairDom', null);\n        }\n      } else if (crosshairs === 'y') {\n        this.resetCrosshair('y', crosshairBox); // 仅显示 y 的 crosshair，x 移除\n\n        if (xCrosshairDom) {\n          xCrosshairDom.remove();\n          this.set('xCrosshairDom', null);\n        }\n      } else {\n        this.resetCrosshair('x', crosshairBox);\n        this.resetCrosshair('y', crosshairBox);\n      }\n\n      this.setCrossHairsVisible(this.get('visible'));\n    }\n  }; // 设定 crosshair 的位置，需要区分 x,y\n\n\n  Tooltip.prototype.resetCrosshair = function (name, bbox) {\n    var croshairDom = this.checkCrosshair(name);\n    var value = this.get(name);\n\n    if (name === 'x') {\n      modifyCSS(croshairDom, {\n        left: toPx(value),\n        top: toPx(bbox.y),\n        height: toPx(bbox.height)\n      });\n    } else {\n      modifyCSS(croshairDom, {\n        top: toPx(value),\n        left: toPx(bbox.x),\n        width: toPx(bbox.width)\n      });\n    }\n  }; // 如果 crosshair 对应的 dom 不存在，则创建\n\n\n  Tooltip.prototype.checkCrosshair = function (name) {\n    var domName = name + \"CrosshairDom\";\n    var tplName = name + \"CrosshairTpl\";\n    var constName = \"CROSSHAIR_\" + name.toUpperCase();\n    var styleName = CssConst[constName];\n    var croshairDom = this.get(domName);\n    var parent = this.get('parent');\n\n    if (!croshairDom) {\n      croshairDom = createDom(this.get(tplName)); // 创建\n\n      this.applyStyle(styleName, croshairDom); // 设置初始样式\n\n      parent.appendChild(croshairDom); // 添加到跟 tooltip 同级的目录下\n\n      this.set(domName, croshairDom);\n    }\n\n    return croshairDom;\n  };\n\n  Tooltip.prototype.renderItems = function () {\n    this.clearItemDoms();\n    var items = this.get('items');\n    var itemTpl = this.get('itemTpl');\n    var listDom = this.get('listDom');\n\n    if (listDom) {\n      each(items, function (item) {\n        var color = colorUtil.toCSSGradient(item.color);\n\n        var substituteObj = __assign(__assign({}, item), {\n          color: color\n        });\n\n        var domStr = substitute(itemTpl, substituteObj);\n        var itemDom = createDom(domStr);\n        listDom.appendChild(itemDom);\n      });\n      this.applyChildrenStyles(listDom, this.get('domStyles'));\n    }\n  };\n\n  Tooltip.prototype.clearItemDoms = function () {\n    if (this.get('listDom')) {\n      clearDom(this.get('listDom'));\n    }\n  };\n\n  Tooltip.prototype.clearCrosshairs = function () {\n    var xCrosshairDom = this.get('xCrosshairDom');\n    var yCrosshairDom = this.get('yCrosshairDom');\n    xCrosshairDom && xCrosshairDom.remove();\n    yCrosshairDom && yCrosshairDom.remove();\n    this.set('xCrosshairDom', null);\n    this.set('yCrosshairDom', null);\n  };\n\n  return Tooltip;\n}(HtmlComponent);\n\nexport default Tooltip;","map":{"version":3,"mappings":";AAAA,OAAOA,SAAP,MAAsB,kBAAtB;AACA,SAASC,SAAT,EAAoBC,SAApB,QAAqC,gBAArC;AACA,SAASC,IAAT,EAAeC,MAAf,EAAuBC,SAAvB,EAAkCC,UAAlC,QAAoD,YAApD;AACA,OAAOC,aAAP,MAA0B,4BAA1B;AAGA,SAASC,QAAT,EAAmBC,YAAnB,EAAiCC,IAAjC,QAA6C,cAA7C;AACA,OAAO,KAAKC,QAAZ,MAA0B,aAA1B;AACA,OAAOC,YAAP,MAAyB,cAAzB;AAGA,SAASC,aAAT,QAA8B,eAA9B;;AAEA,SAASC,SAAT,CAAmBC,GAAnB,EAAwBC,IAAxB,EAA4B;EAC1B,IAAIC,MAAM,GAAG,KAAb;EACAd,IAAI,CAACa,IAAD,EAAO,UAACE,GAAD,EAAI;IACb,IAAId,MAAM,CAACW,GAAD,EAAMG,GAAN,CAAV,EAAsB;MACpBD,MAAM,GAAG,IAAT;MACA,OAAO,KAAP;IACD;EACF,CALG,CAAJ;EAMA,OAAOA,MAAP;AACD;;AAED;AAAA;AAAA;EAAyDE;;EAAzD;;EA2UC;;EA1UQC,kCAAP;IACE,IAAMC,GAAG,GAAGC,iBAAMC,aAAN,CAAmBC,IAAnB,CAAmB,IAAnB,CAAZ;;IACA,6BACKH,GADL,GACQ;MACNI,IAAI,EAAE,SADA;MAENC,IAAI,EAAE,MAFA;MAGNC,CAAC,EAAE,CAHG;MAINC,CAAC,EAAE,CAJG;MAKNC,KAAK,EAAE,EALD;MAMNC,aAAa,EAAE,IANT;MAONC,YAAY,EAAE,kBAAepB,QAAQ,CAACqB,eAAxB,GAAuC,kBAAvC,GAAwDrB,QAAQ,CAACsB,WAAjE,GAA4E,uBAA5E,GAAkGtB,QAAQ,CAACuB,UAA3G,GAAqH,gBAP7H;MAQNC,OAAO,EAAE,iBAAcxB,QAAQ,CAACyB,eAAvB,GAAsC,kDAAtC,GACUzB,QAAQ,CAAC0B,YADnB,GAC+B,mEAD/B,GAEU1B,QAAQ,CAAC2B,UAFnB,GAE6B,6CAF7B,GAGU3B,QAAQ,CAAC4B,WAHnB,GAG8B,kCAXjC;MAaNC,aAAa,EAAE,kBAAe7B,QAAQ,CAAC8B,WAAxB,GAAmC,WAb5C;MAcNC,aAAa,EAAE,kBAAe/B,QAAQ,CAACgC,WAAxB,GAAmC,WAd5C;MAeNC,KAAK,EAAE,IAfD;MAgBNC,SAAS,EAAE,IAhBL;;MAiBN;;;;MAIAC,MAAM,EAAE,IArBF;MAsBN;MACAC,gBAAgB,EAAE,IAvBZ;MAwBNC,kBAAkB,EAAErC,QAAQ,CAACqB,eAxBvB;MAyBN;MACAiB,UAAU,EAAE,IA1BN;MA2BNC,MAAM,EAAE,EA3BF;MA4BNC,QAAQ,EAAE,OA5BJ;MA6BNC,SAAS,EAAE,IA7BL;MA8BNC,aAAa,EAAEzC;IA9BT,CADR;EAiCD,CAnCM,CADT,CAsCE;;;EACOQ,2BAAP;IACE,IAAI,KAAKkC,GAAL,CAAS,eAAT,CAAJ,EAA+B;MAC7B,KAAKC,mBAAL;IACD,CAFD,MAEO;MACL,KAAKC,UAAL;MACA,KAAKC,WAAL;IACD,CANH,CAOE;;;IACA,KAAKC,aAAL;EACD,CATM,CAvCT,CAkDE;;;EACOtC,0BAAP;IACE;IACA,KAAKuC,eAAL;IACA,KAAKC,QAAL,CAAc,EAAd,EAHF,CAGqB;;IACnB,KAAKC,aAAL;EACD,CALM;;EAOAzC,yBAAP;IACE,IAAM0C,SAAS,GAAG,KAAKC,YAAL,EAAlB;;IACA,IAAI,CAACD,SAAD,IAAc,KAAKE,SAAvB,EAAkC;MAChC;MACA;IACD;;IACD,KAAKC,GAAL,CAAS,SAAT,EAAoB,IAApB;IACA/D,SAAS,CAAC4D,SAAD,EAAY;MACnBI,UAAU,EAAE;IADO,CAAZ,CAAT;IAGA,KAAKC,oBAAL,CAA0B,IAA1B;EACD,CAXM;;EAaA/C,yBAAP;IACE,IAAM0C,SAAS,GAAG,KAAKC,YAAL,EAAlB,CADF,CAEE;;IACA,IAAI,CAACD,SAAD,IAAc,KAAKE,SAAvB,EAAkC;MAChC;IACD;;IACD,KAAKC,GAAL,CAAS,SAAT,EAAoB,KAApB;IACA/D,SAAS,CAAC4D,SAAD,EAAY;MACnBI,UAAU,EAAE;IADO,CAAZ,CAAT;IAGA,KAAKC,oBAAL,CAA0B,KAA1B;EACD,CAXM,CAvET,CAoFE;;;EACO/C,gCAAP;IACE,OAAO;MAAEO,CAAC,EAAE,KAAK2B,GAAL,CAAS,GAAT,CAAL;MAAoB1B,CAAC,EAAE,KAAK0B,GAAL,CAAS,GAAT;IAAvB,CAAP;EACD,CAFM,CArFT,CAwFE;;;EACOlC,gCAAP,UAAmBgD,KAAnB,EAA+B;IAC7B,KAAKH,GAAL,CAAS,GAAT,EAAcG,KAAK,CAACzC,CAApB;IACA,KAAKsC,GAAL,CAAS,GAAT,EAAcG,KAAK,CAACxC,CAApB;IACA,KAAK8B,aAAL;EACD,CAJM;;EAMAtC,yCAAP,UAA4BiD,OAA5B,EAAmC;IACjC,IAAMC,OAAO,GAAGD,OAAO,GAAG,EAAH,GAAQ,MAA/B;IACA,IAAME,aAAa,GAAG,KAAKjB,GAAL,CAAS,eAAT,CAAtB;IACA,IAAMkB,aAAa,GAAG,KAAKlB,GAAL,CAAS,eAAT,CAAtB;IACAiB,aAAa,IACXrE,SAAS,CAACqE,aAAD,EAAgB;MACvBD,OAAO;IADgB,CAAhB,CADX;IAIAE,aAAa,IACXtE,SAAS,CAACsE,aAAD,EAAgB;MACvBF,OAAO;IADgB,CAAhB,CADX;EAID,CAZM,CA/FT,CA6GE;;;EACUlD,kCAAV;IACEE,iBAAMmD,aAAN,CAAmBjD,IAAnB,CAAmB,IAAnB;;IACA,IAAI,KAAK8B,GAAL,CAAS,eAAT,CAAJ,EAA+B;MAC7B,IAAI,KAAKA,GAAL,CAAS,WAAT,CAAJ,EAA2B;QACzB,KAAKA,GAAL,CAAS,WAAT,EAAsBoB,MAAtB;MACD;;MACD,IAAMZ,SAAS,GAAG,KAAKa,kBAAL,EAAlB;MACA,KAAKrB,GAAL,CAAS,QAAT,EAAmBsB,WAAnB,CAA+Bd,SAA/B;MACA,KAAKG,GAAL,CAAS,WAAT,EAAsBH,SAAtB;MACA,KAAKe,WAAL;MACA,KAAKC,WAAL;IACD;EACF,CAZS,CA9GZ,CA4HE;;;EACU1D,gCAAV,UAAsBC,GAAtB,EAAqC;IACnC,IAAI,KAAKiC,GAAL,CAAS,eAAT,CAAJ,EAA+B;MAC7B,KAAKC,mBAAL;IACD,CAFD,MAEO;MACL;MACA,IAAIzC,SAAS,CAACO,GAAD,EAAM,CAAC,OAAD,EAAU,WAAV,CAAN,CAAb,EAA4C;QAC1C,KAAKmC,UAAL;MACD,CAJI,CAKL;;;MACA,IAAIpD,MAAM,CAACiB,GAAD,EAAM,OAAN,CAAV,EAA0B;QACxB,KAAKoC,WAAL;MACD;IACF;;IACDnC,iBAAMyD,WAAN,CAAiBvD,IAAjB,CAAiB,IAAjB,EAAkBH,GAAlB;EACD,CAdS;;EAgBAD,4BAAV;IACE,KAAK4D,SAAL;EACD,CAFS,CA7IZ,CAgJE;;;EACU5D,8BAAV;IACEE,iBAAM2D,SAAN,CAAezD,IAAf,CAAe,IAAf;;IACA,KAAKmC,eAAL;EACD,CAHS,CAjJZ,CAqJE;;;EACUvC,kCAAV;IACE,IAAMO,CAAC,GAAG,KAAK2B,GAAL,CAAS,GAAT,CAAV;IACA,IAAM1B,CAAC,GAAG,KAAK0B,GAAL,CAAS,GAAT,CAAV;IACA,IAAMJ,MAAM,GAAG,KAAKI,GAAL,CAAS,QAAT,CAAf;;IACM,SAAuB,KAAK4B,SAAL,EAAvB;IAAA,IAAEC,OAAO,aAAT;IAAA,IAAWC,OAAO,aAAlB;;IACN,IAAMjC,QAAQ,GAAG,KAAKG,GAAL,CAAS,UAAT,CAAjB;IACA,IAAMR,MAAM,GAAG,KAAKQ,GAAL,CAAS,QAAT,CAAf;IACA,IAAMQ,SAAS,GAAG,KAAKC,YAAL,EAAlB;IACA,IAAMsB,IAAI,GAAG,KAAKC,OAAL,EAAb;IACQ,SAAK,GAAaD,IAAI,MAAtB;IAAA,IAAOE,MAAM,GAAKF,IAAI,OAAtB;IACR,IAAIG,QAAJ;;IACA,IAAI1C,MAAJ,EAAY;MACV;MACA0C,QAAQ,GAAG/E,YAAY,CAACqC,MAAD,CAAvB;IACD;;IACD,IAAMsB,KAAK,GAAGvD,aAAa,CAACc,CAAD,EAAIC,CAAJ,EAAOsB,MAAP,EAAeuC,KAAf,EAAsBF,MAAtB,EAA8BpC,QAA9B,EAAwCqC,QAAxC,CAA3B;IACAtF,SAAS,CAAC4D,SAAD,EAAY;MACnB4B,IAAI,EAAEhF,IAAI,CAAC0D,KAAK,CAACzC,CAAN,GAAUwD,OAAX,CADS;MAEnBQ,GAAG,EAAEjF,IAAI,CAAC0D,KAAK,CAACxC,CAAN,GAAUwD,OAAX;IAFU,CAAZ,CAAT;IAIA,KAAKQ,eAAL;EACD,CArBS,CAtJZ,CA6KE;;;EACQxE,wCAAR;IACE,IAAMyE,IAAI,GAAG,KAAKlB,kBAAL,EAAb;IACA,IAAMmB,MAAM,GAAgB,KAAKxC,GAAL,CAAS,QAAT,CAA5B;IACA,IAAMyC,YAAY,GAAgB,KAAKzC,GAAL,CAAS,WAAT,CAAlC;;IACA,IAAIyC,YAAY,IAAIA,YAAY,CAACC,UAAb,KAA4BF,MAAhD,EAAwD;MACtDA,MAAM,CAACG,YAAP,CAAoBJ,IAApB,EAA0BE,YAA1B;IACD,CAFD,MAEO;MACLD,MAAM,CAAClB,WAAP,CAAmBiB,IAAnB;IACD;;IACD,KAAK5B,GAAL,CAAS,WAAT,EAAsB4B,IAAtB;IACA,KAAKhB,WAAL;IACA,KAAKC,WAAL;EACD,CAZO;;EAcA1D,uCAAR;IACE,IAAIyE,IAAJ;IACA,IAAM/D,aAAa,GAAG,KAAKwB,GAAL,CAAS,eAAT,CAAtB;;IACA,IAAIxB,aAAJ,EAAmB;MACjB,IAAMoE,IAAI,GAAGpE,aAAa,CAAC,KAAKwB,GAAL,CAAS,OAAT,CAAD,EAAoB,KAAKA,GAAL,CAAS,OAAT,CAApB,CAA1B;;MACA,IAAIjD,SAAS,CAAC6F,IAAD,CAAb,EAAqB;QACnBL,IAAI,GAAGK,IAAP;MACD,CAFD,MAEO;QACLL,IAAI,GAAG5F,SAAS,CAACiG,IAAD,CAAhB;MACD;IACF;;IACD,OAAOL,IAAP;EACD,CAZO,CA5LV,CA0ME;;;EACQzE,8BAAR;IACE,IAAM0C,SAAS,GAAG,KAAKC,YAAL,EAAlB;IACA,IAAMoC,QAAQ,GAAGrC,SAAS,CAACsC,sBAAV,CAAiCzF,QAAQ,CAACsB,WAA1C,EAAuD,CAAvD,CAAjB;IACA,IAAMoE,OAAO,GAAGvC,SAAS,CAACsC,sBAAV,CAAiCzF,QAAQ,CAACuB,UAA1C,EAAsD,CAAtD,CAAhB;IACA,KAAK+B,GAAL,CAAS,UAAT,EAAqBkC,QAArB;IACA,KAAKlC,GAAL,CAAS,SAAT,EAAoBoC,OAApB;EACD,CANO,CA3MV,CAmNE;;;EACQjF,+BAAR;IACE,IAAMwB,KAAK,GAAG,KAAKU,GAAL,CAAS,OAAT,CAAd;IACA,IAAMT,SAAS,GAAG,KAAKS,GAAL,CAAS,WAAT,CAAlB;;IACA,IAAIT,SAAS,IAAID,KAAjB,EAAwB;MACtB,KAAKgB,QAAL,CAAchB,KAAd;IACD,CAFD,MAEO;MACL,KAAKgB,QAAL,CAAc,EAAd;IACD;EACF,CARO,CApNV,CA6NE;;;EACQxC,6BAAR,UAAiBkF,IAAjB,EAAqB;IACnB,IAAMH,QAAQ,GAAG,KAAK7C,GAAL,CAAS,UAAT,CAAjB;;IACA,IAAI6C,QAAJ,EAAc;MACZA,QAAQ,CAACI,SAAT,GAAqBD,IAArB;IACD;EACF,CALO,CA9NV,CAoOE;;;EACQlF,oCAAR;IACE,IAAM2B,gBAAgB,GAAG,KAAKO,GAAL,CAAS,kBAAT,CAAzB;IACA,IAAML,UAAU,GAAG,KAAKK,GAAL,CAAS,YAAT,CAAnB;;IACA,IAAI,CAACP,gBAAD,IAAqB,CAACE,UAA1B,EAAsC;MACpC;MACA,KAAKU,eAAL;IACD,CAHD,MAGO;MACL,IAAM6C,YAAY,GAAG/F,YAAY,CAACsC,gBAAD,CAAjC;MACA,IAAMwB,aAAa,GAAG,KAAKjB,GAAL,CAAS,eAAT,CAAtB;MACA,IAAMkB,aAAa,GAAG,KAAKlB,GAAL,CAAS,eAAT,CAAtB;;MACA,IAAIL,UAAU,KAAK,GAAnB,EAAwB;QACtB,KAAKwD,cAAL,CAAoB,GAApB,EAAyBD,YAAzB,EADsB,CAEtB;;QACA,IAAIhC,aAAJ,EAAmB;UACjBA,aAAa,CAACE,MAAd;UACA,KAAKT,GAAL,CAAS,eAAT,EAA0B,IAA1B;QACD;MACF,CAPD,MAOO,IAAIhB,UAAU,KAAK,GAAnB,EAAwB;QAC7B,KAAKwD,cAAL,CAAoB,GAApB,EAAyBD,YAAzB,EAD6B,CAE7B;;QACA,IAAIjC,aAAJ,EAAmB;UACjBA,aAAa,CAACG,MAAd;UACA,KAAKT,GAAL,CAAS,eAAT,EAA0B,IAA1B;QACD;MACF,CAPM,MAOA;QACL,KAAKwC,cAAL,CAAoB,GAApB,EAAyBD,YAAzB;QACA,KAAKC,cAAL,CAAoB,GAApB,EAAyBD,YAAzB;MACD;;MACD,KAAKrC,oBAAL,CAA0B,KAAKb,GAAL,CAAS,SAAT,CAA1B;IACD;EACF,CA9BO,CArOV,CAoQE;;;EACQlC,mCAAR,UAAuBK,IAAvB,EAAqC4D,IAArC,EAAyC;IACvC,IAAMqB,WAAW,GAAG,KAAKC,cAAL,CAAoBlF,IAApB,CAApB;IACA,IAAMmF,KAAK,GAAG,KAAKtD,GAAL,CAAS7B,IAAT,CAAd;;IACA,IAAIA,IAAI,KAAK,GAAb,EAAkB;MAChBvB,SAAS,CAACwG,WAAD,EAAc;QACrBhB,IAAI,EAAEhF,IAAI,CAACkG,KAAD,CADW;QAErBjB,GAAG,EAAEjF,IAAI,CAAC2E,IAAI,CAACzD,CAAN,CAFY;QAGrB2D,MAAM,EAAE7E,IAAI,CAAC2E,IAAI,CAACE,MAAN;MAHS,CAAd,CAAT;IAKD,CAND,MAMO;MACLrF,SAAS,CAACwG,WAAD,EAAc;QACrBf,GAAG,EAAEjF,IAAI,CAACkG,KAAD,CADY;QAErBlB,IAAI,EAAEhF,IAAI,CAAC2E,IAAI,CAAC1D,CAAN,CAFW;QAGrB8D,KAAK,EAAE/E,IAAI,CAAC2E,IAAI,CAACI,KAAN;MAHU,CAAd,CAAT;IAKD;EACF,CAhBO,CArQV,CAuRE;;;EACQrE,mCAAR,UAAuBK,IAAvB,EAAmC;IACjC,IAAMoF,OAAO,GAAMpF,IAAI,iBAAvB;IACA,IAAMqF,OAAO,GAAMrF,IAAI,iBAAvB;IACA,IAAMsF,SAAS,GAAG,eAAatF,IAAI,CAACuF,WAAL,EAA/B;IACA,IAAMC,SAAS,GAAGtG,QAAQ,CAACoG,SAAD,CAA1B;IACA,IAAIL,WAAW,GAAG,KAAKpD,GAAL,CAASuD,OAAT,CAAlB;IACA,IAAMf,MAAM,GAAG,KAAKxC,GAAL,CAAS,QAAT,CAAf;;IACA,IAAI,CAACoD,WAAL,EAAkB;MAChBA,WAAW,GAAGzG,SAAS,CAAC,KAAKqD,GAAL,CAASwD,OAAT,CAAD,CAAvB,CADgB,CAC4B;;MAC5C,KAAKI,UAAL,CAAgBD,SAAhB,EAA2BP,WAA3B,EAFgB,CAEyB;;MACzCZ,MAAM,CAAClB,WAAP,CAAmB8B,WAAnB,EAHgB,CAGiB;;MACjC,KAAKzC,GAAL,CAAS4C,OAAT,EAAkBH,WAAlB;IACD;;IACD,OAAOA,WAAP;EACD,CAdO;;EAgBAtF,gCAAR;IACE,KAAKyC,aAAL;IACA,IAAMhC,KAAK,GAAG,KAAKyB,GAAL,CAAS,OAAT,CAAd;IACA,IAAMnB,OAAO,GAAG,KAAKmB,GAAL,CAAS,SAAT,CAAhB;IACA,IAAM+C,OAAO,GAAG,KAAK/C,GAAL,CAAS,SAAT,CAAhB;;IACA,IAAI+C,OAAJ,EAAa;MACXlG,IAAI,CAAC0B,KAAD,EAAQ,UAACsF,IAAD,EAAK;QACf,IAAMC,KAAK,GAAGpH,SAAS,CAACqH,aAAV,CAAwBF,IAAI,CAACC,KAA7B,CAAd;;QACA,IAAME,aAAa,yBACdH,IADc,GACV;UACPC,KAAK;QADE,CADU,CAAnB;;QAKA,IAAMG,MAAM,GAAGjH,UAAU,CAAC6B,OAAD,EAAUmF,aAAV,CAAzB;QACA,IAAME,OAAO,GAAGvH,SAAS,CAACsH,MAAD,CAAzB;QACAlB,OAAO,CAACzB,WAAR,CAAoB4C,OAApB;MACD,CAVG,CAAJ;MAWA,KAAKC,mBAAL,CAAyBpB,OAAzB,EAAkC,KAAK/C,GAAL,CAAS,WAAT,CAAlC;IACD;EACF,CAnBO;;EAqBAlC,kCAAR;IACE,IAAI,KAAKkC,GAAL,CAAS,SAAT,CAAJ,EAAyB;MACvB9C,QAAQ,CAAC,KAAK8C,GAAL,CAAS,SAAT,CAAD,CAAR;IACD;EACF,CAJO;;EAMAlC,oCAAR;IACE,IAAMmD,aAAa,GAAG,KAAKjB,GAAL,CAAS,eAAT,CAAtB;IACA,IAAMkB,aAAa,GAAG,KAAKlB,GAAL,CAAS,eAAT,CAAtB;IACAiB,aAAa,IAAIA,aAAa,CAACG,MAAd,EAAjB;IACAF,aAAa,IAAIA,aAAa,CAACE,MAAd,EAAjB;IACA,KAAKT,GAAL,CAAS,eAAT,EAA0B,IAA1B;IACA,KAAKA,GAAL,CAAS,eAAT,EAA0B,IAA1B;EACD,CAPO;;EAQV;AAAC,CA3UD,CAAyD1D,aAAzD;;AA6UA,eAAea,OAAf","names":["colorUtil","createDom","modifyCSS","each","hasKey","isElement","substitute","HtmlComponent","clearDom","regionToBBox","toPx","CssConst","TooltipTheme","getAlignPoint","hasOneKey","obj","keys","result","key","__extends","Tooltip","cfg","_super","getDefaultCfg","call","name","type","x","y","items","customContent","containerTpl","CONTAINER_CLASS","TITLE_CLASS","LIST_CLASS","itemTpl","LIST_ITEM_CLASS","MARKER_CLASS","NAME_CLASS","VALUE_CLASS","xCrosshairTpl","CROSSHAIR_X","yCrosshairTpl","CROSSHAIR_Y","title","showTitle","region","crosshairsRegion","containerClassName","crosshairs","offset","position","domStyles","defaultStyles","get","renderCustomContent","resetTitle","renderItems","resetPosition","clearCrosshairs","setTitle","clearItemDoms","container","getContainer","destroyed","set","visibility","setCrossHairsVisible","point","visible","display","xCrosshairDom","yCrosshairDom","initContainer","remove","getHtmlContentNode","appendChild","resetStyles","applyStyles","updateInner","cacheDoms","removeDom","getOffset","offsetX","offsetY","bbox","getBBox","height","limitBox","width","left","top","resetCrosshairs","node","parent","curContainer","parentNode","replaceChild","elem","titleDom","getElementsByClassName","listDom","text","innerText","crosshairBox","resetCrosshair","croshairDom","checkCrosshair","value","domName","tplName","constName","toUpperCase","styleName","applyStyle","item","color","toCSSGradient","substituteObj","domStr","itemDom","applyChildrenStyles"],"sourceRoot":"","sources":["../../src/tooltip/html.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}