{"ast":null,"code":"import { size, valuesOfKey } from '@antv/util';\nimport { isBetween } from '../../../utils';\n/**\n * 右侧 View 进行 slider 过滤\n * 由于双轴图是多 View , 需要监听左侧 Slider 的 change 事件来同步右侧 View\n * @param { View } view 右侧视图\n * @param { number[] } sliderValue 滑块当前值\n * @returns void\n */\n\nexport var doSliderFilter = function (view, sliderValue) {\n  var min = sliderValue[0],\n      max = sliderValue[1];\n  var data = view.getOptions().data;\n  var xScale = view.getXScale();\n  var dataSize = size(data);\n\n  if (!xScale || !dataSize) {\n    return;\n  }\n\n  var isHorizontal = true;\n  var values = valuesOfKey(data, xScale.field);\n  var xValues = isHorizontal ? values : values.reverse();\n  var xTickCount = size(xValues);\n  var minIndex = Math.floor(min * (xTickCount - 1));\n  var maxIndex = Math.floor(max * (xTickCount - 1)); // 增加 x 轴的过滤器\n\n  view.filter(xScale.field, function (value) {\n    var idx = xValues.indexOf(value);\n    return idx > -1 ? isBetween(idx, minIndex, maxIndex) : true;\n  });\n  view.getRootView().render(true);\n};","map":{"version":3,"mappings":"AACA,SAASA,IAAT,EAAeC,WAAf,QAAkC,YAAlC;AACA,SAASC,SAAT,QAA0B,gBAA1B;AAEA;;;;;;;;AAOA,OAAO,IAAMC,cAAc,GAAG,UAACC,IAAD,EAAaC,WAAb,EAA0C;EAC/D,OAAG,GAASA,WAAW,GAAvB;EAAA,IAAKC,GAAG,GAAID,WAAW,GAAvB;EACP,IAAME,IAAI,GAAGH,IAAI,CAACI,UAAL,GAAkBD,IAA/B;EACA,IAAME,MAAM,GAAGL,IAAI,CAACM,SAAL,EAAf;EACA,IAAMC,QAAQ,GAAGX,IAAI,CAACO,IAAD,CAArB;;EACA,IAAI,CAACE,MAAD,IAAW,CAACE,QAAhB,EAA0B;IACxB;EACD;;EACD,IAAMC,YAAY,GAAG,IAArB;EACA,IAAMC,MAAM,GAAGZ,WAAW,CAACM,IAAD,EAAOE,MAAM,CAACK,KAAd,CAA1B;EACA,IAAMC,OAAO,GAAGH,YAAY,GAAGC,MAAH,GAAYA,MAAM,CAACG,OAAP,EAAxC;EACA,IAAMC,UAAU,GAAGjB,IAAI,CAACe,OAAD,CAAvB;EACA,IAAMG,QAAQ,GAAGC,IAAI,CAACC,KAAL,CAAWC,GAAG,IAAIJ,UAAU,GAAG,CAAjB,CAAd,CAAjB;EACA,IAAMK,QAAQ,GAAGH,IAAI,CAACC,KAAL,CAAWd,GAAG,IAAIW,UAAU,GAAG,CAAjB,CAAd,CAAjB,CAbsE,CAetE;;EACAb,IAAI,CAACmB,MAAL,CAAYd,MAAM,CAACK,KAAnB,EAA0B,UAACU,KAAD,EAAW;IACnC,IAAMC,GAAG,GAAWV,OAAO,CAACW,OAAR,CAAgBF,KAAhB,CAApB;IACA,OAAOC,GAAG,GAAG,CAAC,CAAP,GAAWvB,SAAS,CAACuB,GAAD,EAAMP,QAAN,EAAgBI,QAAhB,CAApB,GAAgD,IAAvD;EACD,CAHD;EAIAlB,IAAI,CAACuB,WAAL,GAAmBC,MAAnB,CAA0B,IAA1B;AACD,CArBM","names":["size","valuesOfKey","isBetween","doSliderFilter","view","sliderValue","max","data","getOptions","xScale","getXScale","dataSize","isHorizontal","values","field","xValues","reverse","xTickCount","minIndex","Math","floor","min","maxIndex","filter","value","idx","indexOf","getRootView","render"],"sourceRoot":"","sources":["../../../../src/plots/dual-axes/util/render-sider.ts"],"sourcesContent":["import { View } from '@antv/g2';\nimport { size, valuesOfKey } from '@antv/util';\nimport { isBetween } from '../../../utils';\n\n/**\n * 右侧 View 进行 slider 过滤\n * 由于双轴图是多 View , 需要监听左侧 Slider 的 change 事件来同步右侧 View\n * @param { View } view 右侧视图\n * @param { number[] } sliderValue 滑块当前值\n * @returns void\n */\nexport const doSliderFilter = (view: View, sliderValue: [number, number]) => {\n  const [min, max] = sliderValue;\n  const data = view.getOptions().data;\n  const xScale = view.getXScale();\n  const dataSize = size(data);\n  if (!xScale || !dataSize) {\n    return;\n  }\n  const isHorizontal = true;\n  const values = valuesOfKey(data, xScale.field);\n  const xValues = isHorizontal ? values : values.reverse();\n  const xTickCount = size(xValues);\n  const minIndex = Math.floor(min * (xTickCount - 1));\n  const maxIndex = Math.floor(max * (xTickCount - 1));\n\n  // 增加 x 轴的过滤器\n  view.filter(xScale.field, (value: any) => {\n    const idx: number = xValues.indexOf(value);\n    return idx > -1 ? isBetween(idx, minIndex, maxIndex) : true;\n  });\n  view.getRootView().render(true);\n};\n"]},"metadata":{},"sourceType":"module"}