{"ast":null,"code":"import { __assign } from \"tslib\";\nimport { ext } from '@antv/matrix-util';\nimport { each } from '@antv/util';\n\nfunction doShapeZoom(shape, animateCfg, type) {\n  if (shape.isGroup()) {\n    each(shape.getChildren(), function (child) {\n      doShapeZoom(child, animateCfg, type);\n    });\n  } else {\n    var bbox = shape.getBBox();\n    var x = (bbox.minX + bbox.maxX) / 2;\n    var y = (bbox.minY + bbox.maxY) / 2;\n    shape.applyToMatrix([x, y, 1]);\n\n    if (type === 'zoomIn') {\n      // 放大\n      var matrix = ext.transform(shape.getMatrix(), [['t', -x, -y], ['s', 0.01, 0.01], ['t', x, y]]);\n      shape.setMatrix(matrix);\n      shape.animate({\n        matrix: ext.transform(shape.getMatrix(), [['t', -x, -y], ['s', 100, 100], ['t', x, y]])\n      }, animateCfg);\n    } else {\n      shape.animate({\n        matrix: ext.transform(shape.getMatrix(), [['t', -x, -y], ['s', 0.01, 0.01], ['t', x, y]])\n      }, __assign(__assign({}, animateCfg), {\n        callback: function () {\n          shape.remove(true);\n        }\n      }));\n    }\n  }\n}\n/**\n * @ignore\n * 单个 shape 动画\n * shape 以自身中心点逐渐放大的进入动画\n * @param shape 参与动画的图形元素\n * @param animateCfg 动画配置\n * @param cfg 额外信息\n */\n\n\nexport function zoomIn(shape, animateCfg, cfg) {\n  doShapeZoom(shape, animateCfg, 'zoomIn');\n}\n/**\n * @ignore\n * 单个 shape 动画\n * 消失动画，shape 以自身为中心点的逐渐缩小\n * @param shape 参与动画的图形元素\n * @param animateCfg 动画配置\n * @param cfg 额外信息\n */\n\nexport function zoomOut(shape, animateCfg, cfg) {\n  doShapeZoom(shape, animateCfg, 'zoomOut');\n}","map":{"version":3,"mappings":";AAAA,SAASA,GAAT,QAAoB,mBAApB;AACA,SAASC,IAAT,QAAqB,YAArB;;AAKA,SAASC,WAAT,CAAqBC,KAArB,EAA6CC,UAA7C,EAAsEC,IAAtE,EAAgG;EAC9F,IAAIF,KAAK,CAACG,OAAN,EAAJ,EAAqB;IACnBL,IAAI,CAAEE,KAAgB,CAACI,WAAjB,EAAF,EAAkC,UAACC,KAAD,EAAM;MAC1CN,WAAW,CAACM,KAAD,EAAQJ,UAAR,EAAoBC,IAApB,CAAX;IACD,CAFG,CAAJ;EAGD,CAJD,MAIO;IACL,IAAMI,IAAI,GAAGN,KAAK,CAACO,OAAN,EAAb;IACA,IAAMC,CAAC,GAAG,CAACF,IAAI,CAACG,IAAL,GAAYH,IAAI,CAACI,IAAlB,IAA0B,CAApC;IACA,IAAMC,CAAC,GAAG,CAACL,IAAI,CAACM,IAAL,GAAYN,IAAI,CAACO,IAAlB,IAA0B,CAApC;IACAb,KAAK,CAACc,aAAN,CAAoB,CAACN,CAAD,EAAIG,CAAJ,EAAO,CAAP,CAApB;;IAEA,IAAIT,IAAI,KAAK,QAAb,EAAuB;MACrB;MACA,IAAMa,MAAM,GAAGlB,GAAG,CAACmB,SAAJ,CAAchB,KAAK,CAACiB,SAAN,EAAd,EAAiC,CAC9C,CAAC,GAAD,EAAM,CAACT,CAAP,EAAU,CAACG,CAAX,CAD8C,EAE9C,CAAC,GAAD,EAAM,IAAN,EAAY,IAAZ,CAF8C,EAG9C,CAAC,GAAD,EAAMH,CAAN,EAASG,CAAT,CAH8C,CAAjC,CAAf;MAKAX,KAAK,CAACkB,SAAN,CAAgBH,MAAhB;MACAf,KAAK,CAACmB,OAAN,CACE;QACEJ,MAAM,EAAElB,GAAG,CAACmB,SAAJ,CAAchB,KAAK,CAACiB,SAAN,EAAd,EAAiC,CACvC,CAAC,GAAD,EAAM,CAACT,CAAP,EAAU,CAACG,CAAX,CADuC,EAEvC,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,CAFuC,EAGvC,CAAC,GAAD,EAAMH,CAAN,EAASG,CAAT,CAHuC,CAAjC;MADV,CADF,EAQEV,UARF;IAUD,CAlBD,MAkBO;MACLD,KAAK,CAACmB,OAAN,CACE;QACEJ,MAAM,EAAElB,GAAG,CAACmB,SAAJ,CAAchB,KAAK,CAACiB,SAAN,EAAd,EAAiC,CACvC,CAAC,GAAD,EAAM,CAACT,CAAP,EAAU,CAACG,CAAX,CADuC,EAEvC,CAAC,GAAD,EAAM,IAAN,EAAY,IAAZ,CAFuC,EAGvC,CAAC,GAAD,EAAMH,CAAN,EAASG,CAAT,CAHuC,CAAjC;MADV,CADF,EAOGS,sBAEInB,UAFJ,GAEc;QACboB,QAAQ,EAAE;UACRrB,KAAK,CAACsB,MAAN,CAAa,IAAb;QACD;MAHY,CAFd,CAPH;IAeD;EACF;AACF;AAED;;;;;;;;;;AAQA,OAAM,SAAUC,MAAV,CAAiBvB,KAAjB,EAAyCC,UAAzC,EAAkEuB,GAAlE,EAAsF;EAC1FzB,WAAW,CAACC,KAAD,EAAQC,UAAR,EAAoB,QAApB,CAAX;AACD;AAED;;;;;;;;;AAQA,OAAM,SAAUwB,OAAV,CAAkBzB,KAAlB,EAA0CC,UAA1C,EAAmEuB,GAAnE,EAAuF;EAC3FzB,WAAW,CAACC,KAAD,EAAQC,UAAR,EAAoB,SAApB,CAAX;AACD","names":["ext","each","doShapeZoom","shape","animateCfg","type","isGroup","getChildren","child","bbox","getBBox","x","minX","maxX","y","minY","maxY","applyToMatrix","matrix","transform","getMatrix","setMatrix","animate","__assign","callback","remove","zoomIn","cfg","zoomOut"],"sourceRoot":"","sources":["../../../src/animate/animation/zoom.ts"],"sourcesContent":["import { ext } from '@antv/matrix-util';\nimport { each } from '@antv/util';\nimport { IGroup, IShape } from '../../dependents';\nimport { GAnimateCfg } from '../../interface';\nimport { AnimateExtraCfg } from '../interface';\n\nfunction doShapeZoom(shape: IShape | IGroup, animateCfg: GAnimateCfg, type: 'zoomIn' | 'zoomOut') {\n  if (shape.isGroup()) {\n    each((shape as IGroup).getChildren(), (child) => {\n      doShapeZoom(child, animateCfg, type);\n    });\n  } else {\n    const bbox = shape.getBBox();\n    const x = (bbox.minX + bbox.maxX) / 2;\n    const y = (bbox.minY + bbox.maxY) / 2;\n    shape.applyToMatrix([x, y, 1]);\n\n    if (type === 'zoomIn') {\n      // 放大\n      const matrix = ext.transform(shape.getMatrix(), [\n        ['t', -x, -y],\n        ['s', 0.01, 0.01],\n        ['t', x, y],\n      ]);\n      shape.setMatrix(matrix);\n      shape.animate(\n        {\n          matrix: ext.transform(shape.getMatrix(), [\n            ['t', -x, -y],\n            ['s', 100, 100],\n            ['t', x, y],\n          ]),\n        },\n        animateCfg\n      );\n    } else {\n      shape.animate(\n        {\n          matrix: ext.transform(shape.getMatrix(), [\n            ['t', -x, -y],\n            ['s', 0.01, 0.01],\n            ['t', x, y],\n          ]),\n        },\n        {\n          ...animateCfg,\n          callback: () => {\n            shape.remove(true);\n          },\n        }\n      );\n    }\n  }\n}\n\n/**\n * @ignore\n * 单个 shape 动画\n * shape 以自身中心点逐渐放大的进入动画\n * @param shape 参与动画的图形元素\n * @param animateCfg 动画配置\n * @param cfg 额外信息\n */\nexport function zoomIn(shape: IShape | IGroup, animateCfg: GAnimateCfg, cfg: AnimateExtraCfg) {\n  doShapeZoom(shape, animateCfg, 'zoomIn');\n}\n\n/**\n * @ignore\n * 单个 shape 动画\n * 消失动画，shape 以自身为中心点的逐渐缩小\n * @param shape 参与动画的图形元素\n * @param animateCfg 动画配置\n * @param cfg 额外信息\n */\nexport function zoomOut(shape: IShape | IGroup, animateCfg: GAnimateCfg, cfg: AnimateExtraCfg) {\n  doShapeZoom(shape, animateCfg, 'zoomOut');\n}\n"]},"metadata":{},"sourceType":"module"}