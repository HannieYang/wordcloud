{"ast":null,"code":"import { __extends } from \"tslib\";\nimport { getXDimensionLength } from '../util/coordinate';\nimport Geometry from './base';\n/** 引入对应的 ShapeFactory */\n\nimport './shape/schema';\nimport { getDefaultSize } from './util/shape-size';\n/**\n * Schema 几何标记，用于一些自定义图形的绘制，比如箱型图、股票图等。\n */\n\nvar Schema =\n/** @class */\nfunction (_super) {\n  __extends(Schema, _super);\n\n  function Schema() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = 'schema';\n    _this.shapeType = 'schema';\n    _this.generatePoints = true;\n    return _this;\n  }\n  /**\n   * 获取 Shape 的关键点数据。\n   * @param record\n   * @returns\n   */\n\n\n  Schema.prototype.createShapePointsCfg = function (record) {\n    var cfg = _super.prototype.createShapePointsCfg.call(this, record); // 计算每个 shape 的 size\n\n\n    var size;\n    var sizeAttr = this.getAttribute('size');\n\n    if (sizeAttr) {\n      size = this.getAttributeValues(sizeAttr, record)[0]; // 归一化\n\n      var coordinate = this.coordinate;\n      var coordinateWidth = getXDimensionLength(coordinate);\n      size = size / coordinateWidth;\n    } else {\n      if (!this.defaultSize) {\n        this.defaultSize = getDefaultSize(this);\n      }\n\n      size = this.defaultSize;\n    }\n\n    cfg.size = size;\n    return cfg;\n  };\n\n  return Schema;\n}(Geometry);\n\nexport default Schema;","map":{"version":3,"mappings":";AACA,SAASA,mBAAT,QAAoC,oBAApC;AACA,OAAOC,QAAP,MAAqB,QAArB;AACA;;AACA,OAAO,gBAAP;AACA,SAASC,cAAT,QAA+B,mBAA/B;AAEA;;;;AAGA;AAAA;AAAA;EAAoCC;;EAApC;IAAA;;IACkBC,aAAe,QAAf;IACAA,kBAAoB,QAApB;IACNA,uBAA0B,IAA1B;;EA6BX;EA3BC;;;;;;;EAKUC,wCAAV,UAA+BC,MAA/B,EAAkD;IAChD,IAAMC,GAAG,GAAGC,iBAAMC,oBAAN,CAA0BC,IAA1B,CAA0B,IAA1B,EAA2BJ,MAA3B,CAAZ,CADgD,CAGhD;;;IACA,IAAIK,IAAJ;IACA,IAAMC,QAAQ,GAAG,KAAKC,YAAL,CAAkB,MAAlB,CAAjB;;IACA,IAAID,QAAJ,EAAc;MACZD,IAAI,GAAG,KAAKG,kBAAL,CAAwBF,QAAxB,EAAkCN,MAAlC,EAA0C,CAA1C,CAAP,CADY,CAEZ;;MACA,IAAMS,UAAU,GAAG,KAAKA,UAAxB;MACA,IAAMC,eAAe,GAAGhB,mBAAmB,CAACe,UAAD,CAA3C;MACAJ,IAAI,GAAGA,IAAI,GAAGK,eAAd;IACD,CAND,MAMO;MACL,IAAI,CAAC,KAAKC,WAAV,EAAuB;QACrB,KAAKA,WAAL,GAAmBf,cAAc,CAAC,IAAD,CAAjC;MACD;;MACDS,IAAI,GAAG,KAAKM,WAAZ;IACD;;IACDV,GAAG,CAACI,IAAJ,GAAWA,IAAX;IAEA,OAAOJ,GAAP;EACD,CArBS;;EAsBZ;AAAC,CAhCD,CAAoCN,QAApC","names":["getXDimensionLength","Geometry","getDefaultSize","__extends","_this","Schema","record","cfg","_super","createShapePointsCfg","call","size","sizeAttr","getAttribute","getAttributeValues","coordinate","coordinateWidth","defaultSize"],"sourceRoot":"","sources":["../../src/geometry/schema.ts"],"sourcesContent":["import { LooseObject } from '../interface';\nimport { getXDimensionLength } from '../util/coordinate';\nimport Geometry from './base';\n/** 引入对应的 ShapeFactory */\nimport './shape/schema';\nimport { getDefaultSize } from './util/shape-size';\n\n/**\n * Schema 几何标记，用于一些自定义图形的绘制，比如箱型图、股票图等。\n */\nexport default class Schema extends Geometry {\n  public readonly type: string = 'schema';\n  public readonly shapeType: string = 'schema';\n  protected generatePoints: boolean = true;\n\n  /**\n   * 获取 Shape 的关键点数据。\n   * @param record\n   * @returns\n   */\n  protected createShapePointsCfg(record: LooseObject) {\n    const cfg = super.createShapePointsCfg(record);\n\n    // 计算每个 shape 的 size\n    let size;\n    const sizeAttr = this.getAttribute('size');\n    if (sizeAttr) {\n      size = this.getAttributeValues(sizeAttr, record)[0];\n      // 归一化\n      const coordinate = this.coordinate;\n      const coordinateWidth = getXDimensionLength(coordinate);\n      size = size / coordinateWidth;\n    } else {\n      if (!this.defaultSize) {\n        this.defaultSize = getDefaultSize(this);\n      }\n      size = this.defaultSize;\n    }\n    cfg.size = size;\n\n    return cfg;\n  }\n}\n"]},"metadata":{},"sourceType":"module"}