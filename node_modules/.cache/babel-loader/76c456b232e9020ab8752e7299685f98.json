{"ast":null,"code":"import { __assign, __extends } from \"tslib\";\nimport GroupComponent from '../abstract/group-component';\nimport { renderTag } from '../util/graphic';\nimport { applyRotate, applyTranslate } from '../util/matrix';\nimport Theme from '../util/theme';\n\nvar TextAnnotation =\n/** @class */\nfunction (_super) {\n  __extends(TextAnnotation, _super);\n\n  function TextAnnotation() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  /**\n   * @protected\n   * 默认的配置项\n   * @returns {object} 默认的配置项\n   */\n\n\n  TextAnnotation.prototype.getDefaultCfg = function () {\n    var cfg = _super.prototype.getDefaultCfg.call(this);\n\n    return __assign(__assign({}, cfg), {\n      name: 'annotation',\n      type: 'text',\n      locationType: 'point',\n      x: 0,\n      y: 0,\n      content: '',\n      rotate: null,\n      style: {},\n      background: null,\n      maxLength: null,\n      autoEllipsis: true,\n      isVertical: false,\n      ellipsisPosition: 'tail',\n      defaultCfg: {\n        style: {\n          fill: Theme.textColor,\n          fontSize: 12,\n          textAlign: 'center',\n          textBaseline: 'middle',\n          fontFamily: Theme.fontFamily\n        }\n      }\n    });\n  }; // 复写 setLocation 方法，不需要重新创建 text\n\n\n  TextAnnotation.prototype.setLocation = function (location) {\n    this.set('x', location.x);\n    this.set('y', location.y);\n    this.resetLocation();\n  };\n\n  TextAnnotation.prototype.renderInner = function (group) {\n    var _a = this.getLocation(),\n        x = _a.x,\n        y = _a.y;\n\n    var content = this.get('content');\n    var style = this.get('style');\n    var id = this.getElementId('text');\n    var name = this.get('name') + \"-text\";\n    var maxLength = this.get('maxLength');\n    var autoEllipsis = this.get('autoEllipsis');\n    var isVertical = this.get('isVertical');\n    var ellipsisPosition = this.get('ellipsisPosition');\n    var background = this.get('background');\n    var rotate = this.get('rotate');\n    var cfg = {\n      id: id,\n      name: name,\n      x: x,\n      y: y,\n      content: content,\n      style: style,\n      maxLength: maxLength,\n      autoEllipsis: autoEllipsis,\n      isVertical: isVertical,\n      ellipsisPosition: ellipsisPosition,\n      background: background,\n      rotate: rotate\n    };\n    renderTag(group, cfg);\n  };\n\n  TextAnnotation.prototype.resetLocation = function () {\n    var textGroup = this.getElementByLocalId('text-group');\n\n    if (textGroup) {\n      var _a = this.getLocation(),\n          x = _a.x,\n          y = _a.y;\n\n      var rotate = this.get('rotate');\n      applyTranslate(textGroup, x, y);\n      applyRotate(textGroup, rotate, x, y);\n    }\n  };\n\n  return TextAnnotation;\n}(GroupComponent);\n\nexport default TextAnnotation;","map":{"version":3,"mappings":"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","names":["GroupComponent","renderTag","applyRotate","applyTranslate","Theme","__extends","TextAnnotation","cfg","_super","getDefaultCfg","call","name","type","locationType","x","y","content","rotate","style","background","maxLength","autoEllipsis","isVertical","ellipsisPosition","defaultCfg","fill","textColor","fontSize","textAlign","textBaseline","fontFamily","location","set","resetLocation","group","getLocation","get","id","getElementId","textGroup","getElementByLocalId"],"sourceRoot":"","sources":["../../src/annotation/text.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}