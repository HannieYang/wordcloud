{"ast":null,"code":"import { __extends } from \"tslib\";\nimport { FIELD_ORIGIN } from '../constant';\nimport Path from './path';\nimport './shape/area';\n/**\n * Area 几何标记类。\n * 常用于绘制面积图。\n */\n\nvar Area =\n/** @class */\nfunction (_super) {\n  __extends(Area, _super);\n\n  function Area(cfg) {\n    var _this = _super.call(this, cfg) || this;\n\n    _this.type = 'area';\n    _this.shapeType = 'area';\n    /** 生成图形关键点 */\n\n    _this.generatePoints = true;\n    /**\n     * 面积图是否从 0 基准线开始填充。\n     * 1. 默认值为 `true`，表现如下：\n     * ![image](https://gw.alipayobjects.com/zos/rmsportal/ZQqwUCczalrKqGgagOVp.png)\n     * 2. 当值为 `false` 时，表现如下：\n     * ![image](https://gw.alipayobjects.com/zos/rmsportal/yPswkaXvUpCYOdhocGwB.png)\n     */\n\n    _this.startOnZero = true;\n    var _a = cfg.startOnZero,\n        startOnZero = _a === void 0 ? true : _a,\n        _b = cfg.sortable,\n        sortable = _b === void 0 ? false : _b,\n        _c = cfg.showSinglePoint,\n        showSinglePoint = _c === void 0 ? false : _c;\n    _this.startOnZero = startOnZero; // 默认为 true\n\n    _this.sortable = sortable; // 关闭默认的 X 轴数据排序\n\n    _this.showSinglePoint = showSinglePoint;\n    return _this;\n  }\n  /**\n   * 获取图形绘制的关键点以及数据\n   * @param mappingData 映射后的数据\n   */\n\n\n  Area.prototype.getPointsAndData = function (mappingData) {\n    var points = [];\n    var data = [];\n\n    for (var i = 0, len = mappingData.length; i < len; i++) {\n      var obj = mappingData[i];\n      points.push(obj.points);\n      data.push(obj[FIELD_ORIGIN]);\n    }\n\n    return {\n      points: points,\n      data: data\n    };\n  };\n  /**\n   * 获取 Y 轴上的最小值\n   * @returns y 字段最小值\n   */\n\n\n  Area.prototype.getYMinValue = function () {\n    if (this.startOnZero) {\n      return _super.prototype.getYMinValue.call(this);\n    }\n\n    var yScale = this.getYScale();\n    return yScale.min;\n  };\n\n  return Area;\n}(Path);\n\nexport default Area;","map":{"version":3,"mappings":";AAAA,SAASA,YAAT,QAA6B,aAA7B;AAEA,OAAOC,IAAP,MAA8B,QAA9B;AACA,OAAO,cAAP;AAcA;;;;;AAIA;AAAA;AAAA;EAAkCC;;EAchC,cAAYC,GAAZ,EAAwB;IAAxB,YACEC,kBAAMD,GAAN,KAAU,IADZ;;IAbgBE,aAAe,MAAf;IACAA,kBAAoB,MAApB;IAChB;;IACgBA,uBAA0B,IAA1B;IAChB;;;;;;;;IAOgBA,oBAAuB,IAAvB;IAKN,SAAkEF,GAAG,YAArE;IAAA,eAAW,mBAAG,IAAH,GAAOG,EAAlB;IAAA,IAAoBC,KAA8CJ,GAAG,SAArE;IAAA,IAAoBK,QAAQ,mBAAG,KAAH,GAAQD,EAApC;IAAA,IAAsCE,KAA4BN,GAAG,gBAArE;IAAA,IAAsCO,eAAe,mBAAG,KAAH,GAAQD,EAA7D;IACRJ,KAAI,CAACM,WAAL,GAAmBA,WAAnB,CAJsB,CAIU;;IAChCN,KAAI,CAACG,QAAL,GAAgBA,QAAhB,CALsB,CAKI;;IAC1BH,KAAI,CAACK,eAAL,GAAuBA,eAAvB;;EACD;EAED;;;;;;EAIUE,kCAAV,UAA2BC,WAA3B,EAAsD;IACpD,IAAMC,MAAM,GAAG,EAAf;IACA,IAAMC,IAAI,GAAG,EAAb;;IAEA,KAAK,IAAIC,CAAC,GAAG,CAAR,EAAWC,GAAG,GAAGJ,WAAW,CAACK,MAAlC,EAA0CF,CAAC,GAAGC,GAA9C,EAAmDD,CAAC,EAApD,EAAwD;MACtD,IAAMG,GAAG,GAAGN,WAAW,CAACG,CAAD,CAAvB;MACAF,MAAM,CAACM,IAAP,CAAYD,GAAG,CAACL,MAAhB;MACAC,IAAI,CAACK,IAAL,CAAUD,GAAG,CAACnB,YAAD,CAAb;IACD;;IAED,OAAO;MACLc,MAAM,QADD;MAELC,IAAI;IAFC,CAAP;EAID,CAdS;EAgBV;;;;;;EAIUH,8BAAV;IACE,IAAI,KAAKD,WAAT,EAAsB;MACpB,OAAOP,iBAAMiB,YAAN,CAAkBC,IAAlB,CAAkB,IAAlB,CAAP;IACD;;IACD,IAAMC,MAAM,GAAG,KAAKC,SAAL,EAAf;IACA,OAAOD,MAAM,CAACE,GAAd;EACD,CANS;;EAOZ;AAAC,CAtDD,CAAkCxB,IAAlC","names":["FIELD_ORIGIN","Path","__extends","cfg","_super","_this","_a","_b","sortable","_c","showSinglePoint","startOnZero","Area","mappingData","points","data","i","len","length","obj","push","getYMinValue","call","yScale","getYScale","min"],"sourceRoot":"","sources":["../../src/geometry/area.ts"],"sourcesContent":["import { FIELD_ORIGIN } from '../constant';\nimport { MappingDatum } from '../interface';\nimport Path, { PathCfg } from './path';\nimport './shape/area';\n\n/** Area 几何标记构造函数参数 */\nexport interface AreaCfg extends PathCfg {\n  /**\n   * 面积图是否从 0 基准线开始填充。\n   * 1. 默认值为 `true`，表现如下：\n   * ![image](https://gw.alipayobjects.com/zos/rmsportal/ZQqwUCczalrKqGgagOVp.png)\n   * 2. 当值为 `false` 时，表现如下：\n   * ![image](https://gw.alipayobjects.com/zos/rmsportal/yPswkaXvUpCYOdhocGwB.png)\n   */\n  startOnZero?: boolean;\n}\n\n/**\n * Area 几何标记类。\n * 常用于绘制面积图。\n */\nexport default class Area extends Path {\n  public readonly type: string = 'area';\n  public readonly shapeType: string = 'area';\n  /** 生成图形关键点 */\n  public readonly generatePoints: boolean = true;\n  /**\n   * 面积图是否从 0 基准线开始填充。\n   * 1. 默认值为 `true`，表现如下：\n   * ![image](https://gw.alipayobjects.com/zos/rmsportal/ZQqwUCczalrKqGgagOVp.png)\n   * 2. 当值为 `false` 时，表现如下：\n   * ![image](https://gw.alipayobjects.com/zos/rmsportal/yPswkaXvUpCYOdhocGwB.png)\n   */\n  public readonly startOnZero: boolean = true;\n\n  constructor(cfg: AreaCfg) {\n    super(cfg);\n\n    const { startOnZero = true, sortable = false, showSinglePoint = false } = cfg;\n    this.startOnZero = startOnZero; // 默认为 true\n    this.sortable = sortable; // 关闭默认的 X 轴数据排序\n    this.showSinglePoint = showSinglePoint;\n  }\n\n  /**\n   * 获取图形绘制的关键点以及数据\n   * @param mappingData 映射后的数据\n   */\n  protected getPointsAndData(mappingData: MappingDatum[]) {\n    const points = [];\n    const data = [];\n\n    for (let i = 0, len = mappingData.length; i < len; i++) {\n      const obj = mappingData[i];\n      points.push(obj.points);\n      data.push(obj[FIELD_ORIGIN]);\n    }\n\n    return {\n      points,\n      data,\n    };\n  }\n\n  /**\n   * 获取 Y 轴上的最小值\n   * @returns y 字段最小值\n   */\n  protected getYMinValue(): number {\n    if (this.startOnZero) {\n      return super.getYMinValue();\n    }\n    const yScale = this.getYScale();\n    return yScale.min;\n  }\n}\n"]},"metadata":{},"sourceType":"module"}