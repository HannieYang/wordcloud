{"ast":null,"code":"import { __assign, __extends } from \"tslib\";\nimport { Base } from '@antv/g-base';\nimport { deepMix, each, hasKey, isObject } from '@antv/util';\nvar LOCATION_FIELD_MAP = {\n  none: [],\n  point: ['x', 'y'],\n  region: ['start', 'end'],\n  points: ['points'],\n  circle: ['center', 'radius', 'startAngle', 'endAngle']\n};\n\nvar Component =\n/** @class */\nfunction (_super) {\n  __extends(Component, _super);\n\n  function Component(cfg) {\n    var _this = _super.call(this, cfg) || this;\n\n    _this.initCfg();\n\n    return _this;\n  }\n  /**\n   * @protected\n   * 默认的配置项\n   * @returns {object} 默认的配置项\n   */\n\n\n  Component.prototype.getDefaultCfg = function () {\n    return {\n      id: '',\n      name: '',\n      type: '',\n      locationType: 'none',\n      offsetX: 0,\n      offsetY: 0,\n      animate: false,\n      capture: true,\n      updateAutoRender: false,\n      animateOption: {\n        appear: null,\n        update: {\n          duration: 400,\n          easing: 'easeQuadInOut'\n        },\n        enter: {\n          duration: 400,\n          easing: 'easeQuadInOut'\n        },\n        leave: {\n          duration: 350,\n          easing: 'easeQuadIn'\n        }\n      },\n      events: null,\n      defaultCfg: {},\n      visible: true\n    };\n  };\n  /**\n   * 清理组件的内容，一般配合 render 使用\n   * @example\n   * axis.clear();\n   * axis.render();\n   */\n\n\n  Component.prototype.clear = function () {};\n  /**\n   * 更新组件\n   * @param {object} cfg 更新属性\n   */\n\n\n  Component.prototype.update = function (cfg) {\n    var _this = this;\n\n    var defaultCfg = this.get('defaultCfg') || {};\n    each(cfg, function (value, name) {\n      var originCfg = _this.get(name);\n\n      var newCfg = value;\n\n      if (originCfg !== value) {\n        // 判断两者是否相等，主要是进行 null 的判定\n        if (isObject(value) && defaultCfg[name]) {\n          // 新设置的属性与默认值进行合并\n          newCfg = deepMix({}, defaultCfg[name], value);\n        }\n\n        _this.set(name, newCfg);\n      }\n    });\n    this.updateInner(cfg);\n    this.afterUpdate(cfg);\n  }; // 更新内部\n\n\n  Component.prototype.updateInner = function (cfg) {};\n\n  Component.prototype.afterUpdate = function (cfg) {\n    // 更新时考虑显示、隐藏\n    if (hasKey(cfg, 'visible')) {\n      if (cfg.visible) {\n        this.show();\n      } else {\n        this.hide();\n      }\n    } // 更新时考虑capture\n\n\n    if (hasKey(cfg, 'capture')) {\n      this.setCapture(cfg.capture);\n    }\n  };\n\n  Component.prototype.getLayoutBBox = function () {\n    return this.getBBox(); // 默认返回 getBBox，不同的组件内部单独实现\n  };\n\n  Component.prototype.getLocationType = function () {\n    return this.get('locationType');\n  };\n\n  Component.prototype.getOffset = function () {\n    return {\n      offsetX: this.get('offsetX'),\n      offsetY: this.get('offsetY')\n    };\n  }; // 默认使用 update\n\n\n  Component.prototype.setOffset = function (offsetX, offsetY) {\n    this.update({\n      offsetX: offsetX,\n      offsetY: offsetY\n    });\n  };\n\n  Component.prototype.setLocation = function (cfg) {\n    var location = __assign({}, cfg);\n\n    this.update(location);\n  }; // 实现 ILocation 接口的 getLocation\n\n\n  Component.prototype.getLocation = function () {\n    var _this = this;\n\n    var location = {};\n    var locationType = this.get('locationType');\n    var fields = LOCATION_FIELD_MAP[locationType];\n    each(fields, function (field) {\n      location[field] = _this.get(field);\n    });\n    return location;\n  };\n\n  Component.prototype.isList = function () {\n    return false;\n  };\n\n  Component.prototype.isSlider = function () {\n    return false;\n  };\n  /**\n   * @protected\n   * 初始化，用于具体的组件继承\n   */\n\n\n  Component.prototype.init = function () {}; // 将组件默认的配置项设置合并到传入的配置项\n\n\n  Component.prototype.initCfg = function () {\n    var _this = this;\n\n    var defaultCfg = this.get('defaultCfg');\n    each(defaultCfg, function (value, name) {\n      var cfg = _this.get(name);\n\n      if (isObject(cfg)) {\n        var newCfg = deepMix({}, value, cfg);\n\n        _this.set(name, newCfg);\n      }\n    });\n  };\n\n  return Component;\n}(Base);\n\nexport default Component;","map":{"version":3,"mappings":"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","names":["Base","deepMix","each","hasKey","isObject","LOCATION_FIELD_MAP","none","point","region","points","circle","__extends","cfg","_super","_this","initCfg","Component","id","name","type","locationType","offsetX","offsetY","animate","capture","updateAutoRender","animateOption","appear","update","duration","easing","enter","leave","events","defaultCfg","visible","get","value","originCfg","newCfg","set","updateInner","afterUpdate","show","hide","setCapture","getBBox","location","__assign","fields","field"],"sourceRoot":"","sources":["../../src/abstract/component.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}