{"ast":null,"code":"import { __extends } from \"tslib\";\nimport { each, some } from '@antv/util';\nimport ListState from './list-state';\nvar STATUS_UNCHECKED = 'unchecked';\nvar STATUS_CHECKED = 'checked';\n/**\n * checked Action\n * æä¾›ä¸‰ä¸ªå¯¹å¤–æ–¹æ³•\n * 1. toggle åˆ‡æ¢çŠ¶æ€\n * 2. checked é€‰ä¸­\n * 3. reset æ¸…é™¤é‡ç½®\n */\n\nvar ListChecked =\n/** @class */\nfunction (_super) {\n  __extends(ListChecked, _super);\n\n  function ListChecked() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.stateName = STATUS_CHECKED;\n    return _this;\n  } // å•ä¸ª item è®¾ç½®çŠ¶æ€\n\n\n  ListChecked.prototype.setItemState = function (list, item, enable) {\n    this.setCheckedBy(list, function (el) {\n      return el === item;\n    }, enable);\n  }; // æ ¹æ®æ¡ä»¶è®¾ç½® checked\n\n\n  ListChecked.prototype.setCheckedBy = function (list, callback, enable) {\n    var items = list.getItems();\n\n    if (enable) {\n      // è®¾ç½® checked æ—¶ï¼Œä¿ç•™ä¹‹å‰å·²ç» checked çš„é¡¹\n      each(items, function (item) {\n        if (callback(item)) {\n          if (list.hasState(item, STATUS_UNCHECKED)) {\n            list.setItemState(item, STATUS_UNCHECKED, false);\n          }\n\n          list.setItemState(item, STATUS_CHECKED, true);\n        } else if (!list.hasState(item, STATUS_CHECKED)) {\n          list.setItemState(item, STATUS_UNCHECKED, true);\n        }\n      });\n    }\n  };\n  /**\n   * åˆ‡æ¢çŠ¶æ€.\n   * 1. å½“å…¨éƒ¨é€‰ä¸­çš„æ—¶å€™ æˆ–è€… å½“å‰ item æœªé€‰ä¸­æ—¶ï¼Œè¿›è¡Œæ¿€æ´»æ“ä½œ\n   * 2. å¦åˆ™ï¼Œé‡ç½®\n   * @override\n   */\n\n\n  ListChecked.prototype.toggle = function () {\n    var triggerInfo = this.getTriggerListInfo();\n\n    if (triggerInfo && triggerInfo.item) {\n      var list_1 = triggerInfo.list,\n          item = triggerInfo.item; // ä¸çŸ¥é“ ðŸ¤·â€â™€ï¸ åªè®¤ unchecked status\n\n      var allChecked = !some(list_1.getItems(), function (t) {\n        return list_1.hasState(t, STATUS_UNCHECKED);\n      }); //\n\n      if (allChecked || list_1.hasState(item, STATUS_UNCHECKED)) {\n        this.setItemState(list_1, item, true);\n      } else {\n        this.reset();\n      }\n    }\n  };\n  /**\n   * checked å›¾ä¾‹é¡¹\n   */\n\n\n  ListChecked.prototype.checked = function () {\n    this.setState();\n  };\n  /**\n   * é‡ç½®ï¼Œéœ€è¦å…¨éƒ¨æ¸…ç† checked å’Œ unchecked\n   */\n\n\n  ListChecked.prototype.reset = function () {\n    var components = this.getAllowComponents();\n    each(components, function (component) {\n      component.clearItemsState(STATUS_CHECKED);\n      component.clearItemsState(STATUS_UNCHECKED);\n    });\n  };\n\n  return ListChecked;\n}(ListState);\n\nexport default ListChecked;","map":{"version":3,"mappings":";AAAA,SAASA,IAAT,EAAeC,IAAf,QAA2B,YAA3B;AAEA,OAAOC,SAAP,MAAsB,cAAtB;AAEA,IAAMC,gBAAgB,GAAG,WAAzB;AACA,IAAMC,cAAc,GAAG,SAAvB;AAGA;;;;;;;;AAOA;AAAA;AAAA;EAA0BC;;EAA1B;IAAA;;IACYC,kBAAoBF,cAApB;;EAiEX,CAlED,CAGE;;;EACUG,qCAAV,UAAuBC,IAAvB,EAAoCC,IAApC,EAAoDC,MAApD,EAAmE;IACjE,KAAKC,YAAL,CAAkBH,IAAlB,EAAwB,UAACI,EAAD,EAAG;MAAK,SAAE,KAAKH,IAAP;IAAW,CAA3C,EAA6CC,MAA7C;EACD,CAFS,CAJZ,CAQE;;;EACQH,qCAAR,UAAqBC,IAArB,EAAkCK,QAAlC,EAA2DH,MAA3D,EAA0E;IACxE,IAAMI,KAAK,GAAGN,IAAI,CAACO,QAAL,EAAd;;IACA,IAAIL,MAAJ,EAAY;MACV;MACAV,IAAI,CAACc,KAAD,EAAQ,UAACL,IAAD,EAAK;QACf,IAAII,QAAQ,CAACJ,IAAD,CAAZ,EAAoB;UAClB,IAAID,IAAI,CAACQ,QAAL,CAAcP,IAAd,EAAoBN,gBAApB,CAAJ,EAA2C;YACzCK,IAAI,CAACS,YAAL,CAAkBR,IAAlB,EAAwBN,gBAAxB,EAA0C,KAA1C;UACD;;UACDK,IAAI,CAACS,YAAL,CAAkBR,IAAlB,EAAwBL,cAAxB,EAAwC,IAAxC;QACD,CALD,MAKO,IAAI,CAACI,IAAI,CAACQ,QAAL,CAAcP,IAAd,EAAoBL,cAApB,CAAL,EAA0C;UAC/CI,IAAI,CAACS,YAAL,CAAkBR,IAAlB,EAAwBN,gBAAxB,EAA0C,IAA1C;QACD;MACF,CATG,CAAJ;IAUD;EACF,CAfO;EAiBR;;;;;;;;EAMOI,+BAAP;IACE,IAAMW,WAAW,GAAG,KAAKC,kBAAL,EAApB;;IACA,IAAID,WAAW,IAAIA,WAAW,CAACT,IAA/B,EAAqC;MAC3B,UAAI,GAAWS,WAAW,KAA1B;MAAA,IAAMT,IAAI,GAAKS,WAAW,KAA1B,CAD2B,CAGnC;;MACA,IAAME,UAAU,GAAG,CAACnB,IAAI,CAACoB,MAAI,CAACN,QAAL,EAAD,EAAkB,UAACO,CAAD,EAAE;QAAK,aAAI,CAACN,QAAL,CAAcM,CAAd,EAAiBnB,gBAAjB;MAAkC,CAA3D,CAAxB,CAJmC,CAMnC;;MACA,IAAIiB,UAAU,IAAIC,MAAI,CAACL,QAAL,CAAcP,IAAd,EAAoBN,gBAApB,CAAlB,EAAyD;QACvD,KAAKc,YAAL,CAAkBI,MAAlB,EAAwBZ,IAAxB,EAA8B,IAA9B;MACD,CAFD,MAEO;QACL,KAAKc,KAAL;MACD;IACF;EACF,CAfM;EAiBP;;;;;EAGOhB,gCAAP;IACE,KAAKiB,QAAL;EACD,CAFM;EAIP;;;;;EAGOjB,8BAAP;IACE,IAAMkB,UAAU,GAAG,KAAKC,kBAAL,EAAnB;IACA1B,IAAI,CAACyB,UAAD,EAAa,UAACE,SAAD,EAAU;MACzBA,SAAS,CAACC,eAAV,CAA0BxB,cAA1B;MACAuB,SAAS,CAACC,eAAV,CAA0BzB,gBAA1B;IACD,CAHG,CAAJ;EAID,CANM;;EAOT;AAAC,CAlED,CAA0BD,SAA1B;;AAoEA,eAAeK,WAAf","names":["each","some","ListState","STATUS_UNCHECKED","STATUS_CHECKED","__extends","_this","ListChecked","list","item","enable","setCheckedBy","el","callback","items","getItems","hasState","setItemState","triggerInfo","getTriggerListInfo","allChecked","list_1","t","reset","setState","components","getAllowComponents","component","clearItemsState"],"sourceRoot":"","sources":["../../../../src/interaction/action/component/list-checked.ts"],"sourcesContent":["import { each, some } from '@antv/util';\nimport { IList, ListItem } from '../../../dependents';\nimport ListState from './list-state';\n\nconst STATUS_UNCHECKED = 'unchecked';\nconst STATUS_CHECKED = 'checked';\ntype MatchCallback = (item: ListItem) => boolean;\n\n/**\n * checked Action\n * æä¾›ä¸‰ä¸ªå¯¹å¤–æ–¹æ³•\n * 1. toggle åˆ‡æ¢çŠ¶æ€\n * 2. checked é€‰ä¸­\n * 3. reset æ¸…é™¤é‡ç½®\n */\nclass ListChecked extends ListState {\n  protected stateName: string = STATUS_CHECKED;\n\n  // å•ä¸ª item è®¾ç½®çŠ¶æ€\n  protected setItemState(list: IList, item: ListItem, enable: boolean) {\n    this.setCheckedBy(list, (el) => el === item, enable);\n  }\n\n  // æ ¹æ®æ¡ä»¶è®¾ç½® checked\n  private setCheckedBy(list: IList, callback: MatchCallback, enable: boolean) {\n    const items = list.getItems();\n    if (enable) {\n      // è®¾ç½® checked æ—¶ï¼Œä¿ç•™ä¹‹å‰å·²ç» checked çš„é¡¹\n      each(items, (item) => {\n        if (callback(item)) {\n          if (list.hasState(item, STATUS_UNCHECKED)) {\n            list.setItemState(item, STATUS_UNCHECKED, false);\n          }\n          list.setItemState(item, STATUS_CHECKED, true);\n        } else if (!list.hasState(item, STATUS_CHECKED)) {\n          list.setItemState(item, STATUS_UNCHECKED, true);\n        }\n      });\n    }\n  }\n\n  /**\n   * åˆ‡æ¢çŠ¶æ€.\n   * 1. å½“å…¨éƒ¨é€‰ä¸­çš„æ—¶å€™ æˆ–è€… å½“å‰ item æœªé€‰ä¸­æ—¶ï¼Œè¿›è¡Œæ¿€æ´»æ“ä½œ\n   * 2. å¦åˆ™ï¼Œé‡ç½®\n   * @override\n   */\n  public toggle() {\n    const triggerInfo = this.getTriggerListInfo();\n    if (triggerInfo && triggerInfo.item) {\n      const { list, item } = triggerInfo;\n\n      // ä¸çŸ¥é“ ðŸ¤·â€â™€ï¸ åªè®¤ unchecked status\n      const allChecked = !some(list.getItems(), (t) => list.hasState(t, STATUS_UNCHECKED));\n\n      //\n      if (allChecked || list.hasState(item, STATUS_UNCHECKED)) {\n        this.setItemState(list, item, true);\n      } else {\n        this.reset();\n      }\n    }\n  }\n\n  /**\n   * checked å›¾ä¾‹é¡¹\n   */\n  public checked() {\n    this.setState();\n  }\n\n  /**\n   * é‡ç½®ï¼Œéœ€è¦å…¨éƒ¨æ¸…ç† checked å’Œ unchecked\n   */\n  public reset() {\n    const components = this.getAllowComponents();\n    each(components, (component) => {\n      component.clearItemsState(STATUS_CHECKED);\n      component.clearItemsState(STATUS_UNCHECKED);\n    });\n  }\n}\n\nexport default ListChecked;\n"]},"metadata":{},"sourceType":"module"}